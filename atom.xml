<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HermitLSR&#39;Blog</title>
  
  
  <link href="https://www.hermitlsr.top/atom.xml" rel="self"/>
  
  <link href="https://www.hermitlsr.top/"/>
  <updated>2021-07-14T15:55:21.975Z</updated>
  <id>https://www.hermitlsr.top/</id>
  
  <author>
    <name>hermitlsr</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>菜谱</title>
    <link href="https://www.hermitlsr.top/2021-07-13/70a7eda9.html"/>
    <id>https://www.hermitlsr.top/2021-07-13/70a7eda9.html</id>
    <published>2021-07-13T04:55:04.000Z</published>
    <updated>2021-07-14T15:55:21.975Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="timeline"><div class="timenode"><div class="meta"><p><ol><li>卤肉</li></ol></p></div><div class="body"><p>食材：五花肉，熟鸡蛋，干葱，蒜片，洋葱，大料，香菇</p><p>调味: 生抽，老抽，沙爹酱，胡椒粉，玫瑰露酒</p><p>做法：花肉切条，留几块大的改刀做“霸王桩”，使口感更丰富。部分干葱、蒜片、洋葱和大葱下油锅，大葱缓放，防止炸干，炸至金黄色，捞出备用。大料瓣炸香，下“霸王桩”生煸，再推入五花肉和剩余的葱。葱煸成金黄色，下入攥干水分的香菇，顺锅边烹入生抽，出香气，加入沙爹酱，炒匀。加水，加老抽，再考虑是否加水，加胡椒粉，少许玫瑰露酒增香，加入之前炸好的葱，转至砂锅顿制。开锅时用老抽调颜色，炖二十多分钟时加入熟鸡蛋，炖半小时，闷十分钟即可出锅。</p><p>来源：老饭骨</p></div></div><div class="timenode"><div class="meta"><p><ol start="2"><li>藤椒鱼</li></ol></p></div><div class="body"><p>食材：鳜鱼、乌鱼或者草鱼 甚至白莲？？，葱，姜，酸(泡)菜，淀粉</p><p>调味：盐，料酒，藤椒油</p><p>做法：鱼骨肉分离，去掉鱼皮，鱼肉片成片。用姜，葱，料酒，少许盐将鱼肉码味半小时。锅内少许油，加入姜，葱，酸(泡)菜炒香之后加入高汤，微煮五分钟左右，姜葱酸菜打去不用。先放入鱼头，鱼骨煮五分钟左右，盛出放入盘中。再下入码好的鱼肉，下锅前裹少许干淀粉，中小火慢煮，刚好断生，鱼肉微卷起锅。将藤椒放入盘中，油温七成热淋在藤椒上。</p><p>来源：大师的菜</p></div></div></div>]]></content>
    
    
    <summary type="html">唯有美食不可辜负</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>R语言的久远学习笔记--参数估计</title>
    <link href="https://www.hermitlsr.top/2021-07-12/a251816e.html"/>
    <id>https://www.hermitlsr.top/2021-07-12/a251816e.html</id>
    <published>2021-07-12T03:22:51.000Z</published>
    <updated>2021-07-13T04:49:06.718Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>  这是曾经R语言软件课程的简单笔记的参数估计部份，整理至此。</p><span id="more"></span><h2 id="矩法估计和极大似然估计"><a class="markdownIt-Anchor" href="#矩法估计和极大似然估计"></a> 矩法估计和极大似然估计</h2><h3 id="矩法估计"><a class="markdownIt-Anchor" href="#矩法估计"></a> 矩法估计</h3><p>无固定的函数，矩估计需自行构造统计量，并计算相关数据</p><p>例：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X&lt;-sample(<span class="built_in">c</span>(<span class="number">1</span>,<span class="number">0</span>), <span class="number">20</span>, replace = <span class="built_in">T</span>, prob = <span class="built_in">c</span>(<span class="number">0.6</span>, <span class="number">0.4</span>))</span><br><span class="line">theta &lt;- mean(X)</span><br><span class="line">t &lt;- theta/(<span class="number">1</span>-theta)  <span class="comment"># 构造的t统计量</span></span><br><span class="line">t</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143733552.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143733552.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h3 id="极大似然估计"><a class="markdownIt-Anchor" href="#极大似然估计"></a> 极大似然估计</h3><p>需自行求解出(对数)极大似然函数，可以使用<code>optimize()</code>函数求解极大值和极大值点。多参数时可使用<code>optim()</code>或<code>nlm()</code></p><p><code>optimize(f = , interval = ,lower = min(interval), upper = max(interval), maximum = T, tol = .Machine$dobule.eps^&#123;0.25&#125;, \cdots</code></p><p>例：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f &lt;- <span class="keyword">function</span>(p)(p^<span class="number">517</span>)*(<span class="number">1</span>-p)^<span class="number">483</span></span><br><span class="line">optimize(f, <span class="built_in">c</span>(<span class="number">0</span>,<span class="number">1</span>), maximum = <span class="built_in">T</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143754398.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143754398.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h2 id="单正态总体参数的区间估计"><a class="markdownIt-Anchor" href="#单正态总体参数的区间估计"></a> 单正态总体参数的区间估计</h2><h3 id="均值mu的区间估计"><a class="markdownIt-Anchor" href="#均值mu的区间估计"></a> 均值<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>的区间估计</h3><h4 id="方差sigma2已知时mu的置信区间"><a class="markdownIt-Anchor" href="#方差sigma2已知时mu的置信区间"></a> 方差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>已知时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>的置信区间</h4><p>这种情况下R语言中没有相关内置函数，以下给出方差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>已知时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>的置信区间估计的R语言函数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">z.test &lt;- <span class="keyword">function</span>(x, n, sigma, alpha=<span class="number">0.05</span>, u0=<span class="number">0</span>, alternative=<span class="string">&quot;two.side&quot;</span>)&#123;</span><br><span class="line">  mean &lt;- mean(x)</span><br><span class="line">  z &lt;- (mean-u0)/(sigma/<span class="built_in">sqrt</span>(n))</span><br><span class="line">  p &lt;- pnorm(z, lower.tail = <span class="built_in">F</span>)</span><br><span class="line">  mean &lt;- mean</span><br><span class="line">  z &lt;- z</span><br><span class="line">  p.value &lt;- p</span><br><span class="line">  <span class="keyword">if</span>(alternative ==<span class="string">&quot;two.side&quot;</span>)&#123;</span><br><span class="line">    p.value &lt;- 2*pnorm(<span class="built_in">abs</span>(z), lower.tail = <span class="built_in">F</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    p.value &lt;- pnorm(z)</span><br><span class="line">  &#125;</span><br><span class="line">  conf.int &lt;- <span class="built_in">c</span>(</span><br><span class="line">    mean-sigma*qnorm(<span class="number">1</span>-alpha/<span class="number">2</span>, mean=<span class="number">0</span>, sd=<span class="number">1</span>, </span><br><span class="line">                     lower.tail = <span class="built_in">T</span>)/<span class="built_in">sqrt</span>(n),</span><br><span class="line">    mean+sigma*qnorm(<span class="number">1</span>-alpha/<span class="number">2</span>, mean=<span class="number">0</span>, sd=<span class="number">1</span>, </span><br><span class="line">                     lower.tail = <span class="built_in">T</span>)/<span class="built_in">sqrt</span>(n)</span><br><span class="line">  )</span><br><span class="line">  out &lt;- <span class="built_in">list</span>(mean=mean, z=z, p.value=p.value, conf.int=conf.int)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>验证一个例子</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="number">175</span>, <span class="number">176</span>, <span class="number">173</span>, <span class="number">175</span>, <span class="number">174</span>, <span class="number">173</span>, <span class="number">173</span>, <span class="number">176</span>, <span class="number">173</span>, <span class="number">179</span>)</span><br><span class="line">result &lt;-z.test(x, <span class="number">10</span>, <span class="number">1.5</span>, <span class="number">0.05</span>)</span><br><span class="line">result</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143809262.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143809262.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h4 id="方差sigma2未知时mu的置信区间"><a class="markdownIt-Anchor" href="#方差sigma2未知时mu的置信区间"></a> 方差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>未知时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>的置信区间</h4><p>此时R语言中有内置函数<code>t.test()</code></p><p>例：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="number">175</span>, <span class="number">176</span>, <span class="number">173</span>, <span class="number">175</span>, <span class="number">174</span>, <span class="number">173</span>, <span class="number">173</span>, <span class="number">176</span>, <span class="number">173</span>, <span class="number">179</span>)</span><br><span class="line">result &lt;-t.test(x)</span><br><span class="line">result</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143825615.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNzk0MzMz,size_16,color_FFFFFF,t_70" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143825615.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNzk0MzMz,size_16,color_FFFFFF,t_70" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h3 id="方差sigma2的区间估计"><a class="markdownIt-Anchor" href="#方差sigma2的区间估计"></a> 方差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>的区间估计</h3><p>讨论<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>未知，此种情况R语言中依然没有内置函数求解方差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>的区间估计，给出函数<code>chisq.var.test</code>如下</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">chisq.var.test &lt;- <span class="keyword">function</span>(x, var, alpha, alternative = <span class="string">&quot;two.side&quot;</span>)&#123;</span><br><span class="line">  n &lt;- <span class="built_in">length</span>(x)</span><br><span class="line">  v &lt;- var(x)</span><br><span class="line">  chi &lt;- (n-<span class="number">1</span>)*v/var</span><br><span class="line">  p.value &lt;- pchisq(chi, n-<span class="number">1</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(alternative==<span class="string">&quot;less&quot;</span>)&#123;</span><br><span class="line">    p.value &lt;- pchisq(chi, n-<span class="number">1</span>, lower.tail = <span class="built_in">F</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(alternative==<span class="string">&quot;two.side&quot;</span>)&#123;</span><br><span class="line">    p.value &lt;- 2*<span class="built_in">min</span>(pchisq(chi, n-<span class="number">1</span>), </span><br><span class="line">                     pchisq(chi, n-<span class="number">1</span>, lower.tail = <span class="built_in">F</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  conf.int &lt;- <span class="built_in">c</span>(</span><br><span class="line">    (n-<span class="number">1</span>)*v/qchisq(alpha/<span class="number">2</span>, df=n-<span class="number">1</span>, lower.tail = <span class="built_in">F</span>),</span><br><span class="line">    (n-<span class="number">1</span>)*v/qchisq(alpha/<span class="number">2</span>, df=n-<span class="number">1</span>, lower.tail = <span class="built_in">T</span>)</span><br><span class="line">  )</span><br><span class="line">  </span><br><span class="line">  out &lt;- <span class="built_in">list</span>(var=v, chi2=chi, p.value=p.value, conf.int=conf.int)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>给出一个验证</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="number">175</span>, <span class="number">176</span>, <span class="number">173</span>, <span class="number">175</span>, <span class="number">174</span>, <span class="number">173</span>, <span class="number">173</span>, <span class="number">176</span>, <span class="number">173</span>, <span class="number">179</span>)</span><br><span class="line">result &lt;- chisq.var.test(x , var=<span class="number">1.5</span>, alpha=<span class="number">0.05</span>)</span><br><span class="line">result</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143837158.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143837158.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h2 id="正态总体参数的区间估计"><a class="markdownIt-Anchor" href="#正态总体参数的区间估计"></a> 正态总体参数的区间估计</h2><h3 id="均值差mu_1-mu_2的置信区间"><a class="markdownIt-Anchor" href="#均值差mu_1-mu_2的置信区间"></a> 均值差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>μ</mi><mn>1</mn></msub><mo>−</mo><msub><mi>μ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\mu_1-\mu_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的置信区间</h3><h4 id="两方差都已知时两均值差的置信区间"><a class="markdownIt-Anchor" href="#两方差都已知时两均值差的置信区间"></a> 两方差都已知时两均值差的置信区间</h4><p>依然没有内置函数，需给出函数<code>two.sample.ci()</code>，求解双侧置信区间</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">two.sample.ci &lt;- <span class="keyword">function</span>(x, y, conf.int = <span class="number">0.95</span>, sigma1, sagma2)&#123;</span><br><span class="line">  alpha = <span class="number">1</span>-conf.int</span><br><span class="line">  m &lt;- <span class="built_in">length</span>(x); n&lt;-<span class="built_in">length</span>(y)</span><br><span class="line">  xbar = mean(x)-mean(y)</span><br><span class="line">  zstar = qnorm(<span class="number">1</span>-alpha/<span class="number">2</span>)*<span class="built_in">sqrt</span>((sigma1/m+sagma2/n))</span><br><span class="line">  xbar + <span class="built_in">c</span>(-zstar,+zstar)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看一个例子：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="number">628</span>, <span class="number">583</span>, <span class="number">510</span>, <span class="number">554</span>, <span class="number">612</span>, <span class="number">523</span>, <span class="number">530</span>, <span class="number">615</span>)</span><br><span class="line">y &lt;- <span class="built_in">c</span>(<span class="number">534</span>, <span class="number">433</span>, <span class="number">398</span>, <span class="number">470</span>, <span class="number">567</span>, <span class="number">480</span>, <span class="number">498</span>, <span class="number">560</span>, <span class="number">503</span>, <span class="number">426</span>)</span><br><span class="line">sigma1 &lt;- 2140;sigma2&lt;-<span class="number">3250</span></span><br><span class="line">two.sample.ci(x, y, conf.int=<span class="number">0.95</span>, sigma1, sigma2)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143849905.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143849905.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h4 id="两方差都未知但相等时两均值差的置信区间"><a class="markdownIt-Anchor" href="#两方差都未知但相等时两均值差的置信区间"></a> 两方差都未知但相等时两均值差的置信区间</h4><p>此时可以直接利用<code>t.test()</code>函数</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="number">628</span>, <span class="number">583</span>, <span class="number">510</span>, <span class="number">554</span>, <span class="number">612</span>, <span class="number">523</span>, <span class="number">530</span>, <span class="number">615</span>)</span><br><span class="line">y &lt;- <span class="built_in">c</span>(<span class="number">534</span>, <span class="number">433</span>, <span class="number">398</span>, <span class="number">470</span>, <span class="number">567</span>, <span class="number">480</span>, <span class="number">498</span>, <span class="number">560</span>, <span class="number">503</span>, <span class="number">426</span>)</span><br><span class="line">t.test(x,y,var.equal = <span class="built_in">T</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143900408.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143900408.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h3 id="均值差sigma2_1sigma2_2的置信区间"><a class="markdownIt-Anchor" href="#均值差sigma2_1sigma2_2的置信区间"></a> 均值差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>σ</mi><mn>1</mn><mn>2</mn></msubsup><mi mathvariant="normal">/</mi><msubsup><mi>σ</mi><mn>2</mn><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sigma^2_1/\sigma^2_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span></span></span></span>的置信区间</h3><p>此时,在R中<code>var.test()</code>可以直接用于求两正态总体方差比的置信区间</p><p>例子：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="number">20.5</span>, <span class="number">19.8</span>, <span class="number">19.7</span>, <span class="number">20.4</span>, <span class="number">20.1</span>, <span class="number">20.0</span>, <span class="number">19.0</span>, <span class="number">19.9</span>)</span><br><span class="line">y &lt;- <span class="built_in">c</span>(<span class="number">20.7</span>, <span class="number">19.8</span>, <span class="number">19.5</span>, <span class="number">20.8</span>, <span class="number">20.4</span>, <span class="number">19.6</span>, <span class="number">20.2</span>)</span><br><span class="line">var.test(x,y)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143909978.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143909978.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h2 id="单总体比率p的区间估计"><a class="markdownIt-Anchor" href="#单总体比率p的区间估计"></a> 单总体比率<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>的区间估计</h2><p>假设估计在总体中具有某种特性的个体站总体的比例，设为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>。例如整个学校中女生占全校人数的比例，产品的不合格率，电视的收视率，政策的支持率等。这里采用一种求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>的近似区间估计的方法，<br />称在样本中具有某种特征的个体站样本总数的比例为样本比例。设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>为容量为n的样本中具有某种特征的个体数量，则样本比例为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">x/n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mord">/</span><span class="mord mathdefault">n</span></span></span></span>。当总体中的样品数足够多时，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>近似服从二项分布<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b(n,p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mclose">)</span></span></span></span>(实际上它是超几何分布)，这时总体比例可用样本比例来估计，及<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>=</mo><mfrac><mi>x</mi><mi>n</mi></mfrac></mrow><annotation encoding="application/x-tex">\hat p=\frac{x}{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathdefault">p</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，且为极大似然估计。</p><p>可直接使用<code>prop.test()</code>对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>进行估计与检验，这时用正态分布来近似</p><p>一个例子 ：矫正</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prop.test(<span class="number">38</span>, <span class="number">200</span>, correct = <span class="built_in">T</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143921483.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143921483.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><p>不矫正：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prop.test(<span class="number">38</span>, <span class="number">200</span>, correct = <span class="built_in">F</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143929473.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143929473.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><p>用二项分布来近似<code>binom.test()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">binom.test(<span class="number">38</span>, <span class="number">200</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028143939895.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028143939895.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h2 id="两总体比率差p_i-p_2的区间估计"><a class="markdownIt-Anchor" href="#两总体比率差p_i-p_2的区间估计"></a> 两总体比率差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub><mo>−</mo><msub><mi>p</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">p_i-p_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的区间估计</h2><p>这里仍可使用函数<code>prop.test()</code>，这里给出的是经过连续性修正之后的结果</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">like &lt;- <span class="built_in">c</span>(<span class="number">478</span>, <span class="number">246</span>)</span><br><span class="line">people &lt;- <span class="built_in">c</span>(<span class="number">1000</span>, <span class="number">750</span>)</span><br><span class="line">prop.test(like, people)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028144008402.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028144008402.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><p>可自行给出函数<code>ratio.ci()</code> 计算没有修正的两比例之间的区间估计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ratio.ci &lt;- <span class="keyword">function</span>(x,y,n1,n2,conf.level)&#123;</span><br><span class="line">  xbar1 &lt;- x/n1; xbar2 &lt;- y/n2</span><br><span class="line">  xbar &lt;- xbar1-xbar2</span><br><span class="line">  alpha &lt;- 1-conf.level</span><br><span class="line">  zstar &lt;- qnorm(<span class="number">1</span>-alpha/<span class="number">2</span>)*</span><br><span class="line">    (xbar1*(<span class="number">1</span>-xbar1)/n1+xbar2*(<span class="number">1</span>-xbar2)/n2)^(<span class="number">1</span>/<span class="number">2</span>)</span><br><span class="line">  xbar+<span class="built_in">c</span>(-zstar,+zstar)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>给一个例子</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ratio.ci(<span class="number">478</span>, <span class="number">246</span>, <span class="number">1000</span>, <span class="number">750</span>, conf.level = <span class="number">0.95</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028144021642.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028144021642.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h3 id="估计正态总体均值时样本容量的确定"><a class="markdownIt-Anchor" href="#估计正态总体均值时样本容量的确定"></a> 估计正态总体均值时样本容量的确定</h3><h4 id="总体方差sigma2已知"><a class="markdownIt-Anchor" href="#总体方差sigma2已知"></a> 总体方差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>已知</h4><p>给出自定义函数<code>size.norm1</code>：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">size.norm1 &lt;- <span class="keyword">function</span>(d, var, conf.level=<span class="number">0.95</span>)&#123;</span><br><span class="line">  alpha &lt;- 1-conf.level</span><br><span class="line">  ((qnorm(<span class="number">1</span>-alpha/<span class="number">2</span>)*var^(<span class="number">1</span>/<span class="number">2</span>))/d)^<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>给一个例子：某地区1000户，拟抽取一个简单的样本调查一个月的评价开始，要求置信水平95%，允许最大误差为2，根据经验，家庭间开支的方差为500，应抽取多少户进行调查</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size.norm1(<span class="number">2</span>, <span class="number">500</span>, conf.level = <span class="number">0.95</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2019102814403320.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/2019102814403320.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h4 id="总体方差sigma2未知"><a class="markdownIt-Anchor" href="#总体方差sigma2未知"></a> 总体方差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>未知</h4><p>给出函数<code>size.norm2()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">size.norm2 &lt;- <span class="keyword">function</span>(s, alpha, d, m)&#123;</span><br><span class="line">  t0 &lt;- qt(alpha/<span class="number">2</span>, m, lower.tail = <span class="built_in">F</span>)</span><br><span class="line">  n0 &lt;- (t0*s/d)^<span class="number">2</span></span><br><span class="line">  t1 &lt;- qt(alpha/<span class="number">2</span>, n0, lower.tail = <span class="built_in">F</span>)</span><br><span class="line">  n1 &lt;- (t1*s/d)^<span class="number">2</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="built_in">abs</span>(n1-n0)&gt;<span class="number">0.5</span>)&#123;</span><br><span class="line">    n0 &lt;- (qt(alpha/<span class="number">2</span>, n1, lower.tail = <span class="built_in">F</span>)*s/d)^<span class="number">2</span></span><br><span class="line">    n1 &lt;- (qt(alpha/<span class="number">2</span>, n0, lower.tail = <span class="built_in">F</span>)*s/d)^<span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">  n1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>给一个例子：</p><p>某公司生产了一批新产品，产品总体服从正态分布，现要估计这批产品的平均重量，最大允许误差2，样本标准差<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">s=10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span>，试问<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi><mo>=</mo><mn>0.01</mn></mrow><annotation encoding="application/x-tex">\alpha=0.01</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">1</span></span></span></span>下要抽多少样本</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size.norm2(<span class="number">10</span>, <span class="number">0.01</span>, <span class="number">2</span>, <span class="number">100</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028144044676.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028144044676.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p><h3 id="估计比例p时样本容量的确定"><a class="markdownIt-Anchor" href="#估计比例p时样本容量的确定"></a> 估计比例<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>时样本容量的确定</h3><p>同样给出自定义函数<code>size.bin &lt;- f()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">size.bin &lt;- <span class="keyword">function</span>(d, p, conf.level = <span class="number">0.95</span>)&#123;</span><br><span class="line">  alpha = <span class="number">1</span> - conf.level</span><br><span class="line">  ((qnorm(<span class="number">1</span>-alpha/<span class="number">2</span>))/d)^<span class="number">2</span>*p*(<span class="number">1</span>-p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>例 ：某市一所重点大学历届毕业生就业率为90%，估计应用毕业生就业率，要求估计误差不超过3%，试问<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi><mo>=</mo><mn>0.05</mn></mrow><annotation encoding="application/x-tex">\alpha=0.05</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">5</span></span></span></span>下要抽取应届毕业生多少人？</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">size.bin(<span class="number">0.03</span>, <span class="number">0.9</span>, <span class="number">0.95</span>)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20191028144054649.png" class="lazyload placeholder" data-srcset="https://img-blog.csdnimg.cn/20191028144054649.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="在这里插入图片描述" /></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;  这是曾经R语言软件课程的简单笔记的参数估计部份，整理至此。&lt;/p&gt;</summary>
    
    
    
    <category term="R" scheme="https://www.hermitlsr.top/categories/R/"/>
    
    <category term="学习笔记" scheme="https://www.hermitlsr.top/categories/R/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="R" scheme="https://www.hermitlsr.top/tags/R/"/>
    
    <category term="参数估计" scheme="https://www.hermitlsr.top/tags/%E5%8F%82%E6%95%B0%E4%BC%B0%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>建站序言</title>
    <link href="https://www.hermitlsr.top/2021-06-28/18ee7c87.html"/>
    <id>https://www.hermitlsr.top/2021-06-28/18ee7c87.html</id>
    <published>2021-06-28T02:38:05.000Z</published>
    <updated>2021-07-13T04:04:35.979Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>  欢迎来到在下的小站，本站自2021.6.29正式发布，今后这里将存放一些自己的笔记和生活记录，或者放一些好玩的东东。</p><span id="more"></span><h2 id="建站初衷"><a class="markdownIt-Anchor" href="#建站初衷"></a> 建站初衷</h2><p>  搭建个人站主要目的是为了存放自己的一些 <code>.md</code> 的笔记。在电脑上实在不好管理，也不好查看。通过个人站的形式呈现出来一目了然，十分方便。Volantis 中的 <code>group</code> front-matter 可以基本呈现出书籍文档类的效果，基本满足了我的需求。于是这个基于Hexo -Volantis 主题的小站就此开始建设了。</p><h2 id="建站历程"><a class="markdownIt-Anchor" href="#建站历程"></a> 建站历程</h2><p>  萌生搭建个人站的想法已经有几年了，之所以直到现在才搭建自己的个人站主要还是因为时间不够和畏难心理。一开始考虑到需要购置服务器，自己写网页前端，设计各种素材等等，就头大。没错，对于一个程序语言就能勉强写点python和r的人，完全不沾边啊。当然如果我早点知道有这么多静态博客的框架可以直接用，或许这个站点可以提早出生几年(不是)。<br />  前段时间，也是机缘巧合发现了Hexo这个博客架构，本着程序员(伪)决不重复造轮子的心态，果断采用了简洁的 Next 主题。无他，页面简洁教程多，结果当事人是非常的后悔。 由于太过简洁，需要自己魔改的内容就非常多，而网上的一些教程也不适配现在的 8.0 版本，就踩了很多坑，不过也因此接触了一些 js、css等内容，这为后面顺利美化博客打了基础。<br />  万幸偶遇到 <a href="https://wenchong.space/"><code>翀翀</code></a>，给我指了一条明路，虽然当时没放在心上，不过现在嘛，是真的香。中间经历了一个Butterfly主题，据官方说也是从 <code>Material X</code> 演变过来的，各种配置文档什么的都不错，集成了很多功能，基本只需要自己配置一下设置文档，但体验了一下太花里胡哨，不符合在下矜(古)持(板)的形象。最后还是选择 <code>Volantis</code> 够香，好滋味。<br />  站点基本建设起来之后，考虑到国内访问的问题(<a href="http://github.io">github.io</a> 域名被有的浏览器ban了)，决定还是买一个域名，顺便备个案，以便可以在国内愉快的玩耍。在这途中偶然发现目前 <code>coding</code> 的持续部署是使用了腾讯云的 <code>severless</code>和<code>cos存储</code> ，而腾讯的云函数文档中也直接提供了使用云函数直接部署 Hexo 博客的接口，简直不要太方便。最后就直接买了一个五年的云函数服务一则用来备案，二来则用来部署生成的静态页面。</p><h2 id="最后"><a class="markdownIt-Anchor" href="#最后"></a> 最后</h2><p>  希望自己能够坚持写学习笔记，坚持记录，想必过几年来看也是一个不错的回忆和知识储备。也希望巧合来到本站的你，幸福开心。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;  欢迎来到在下的小站，本站自2021.6.29正式发布，今后这里将存放一些自己的笔记和生活记录，或者放一些好玩的东东。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Volantis 建站记录</title>
    <link href="https://www.hermitlsr.top/2021-06-26/40ecd548.html"/>
    <id>https://www.hermitlsr.top/2021-06-26/40ecd548.html</id>
    <published>2021-06-26T14:04:56.000Z</published>
    <updated>2021-07-13T04:07:08.344Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>  本文记录了自己建站时操作的一些内容，或简或繁，主要是为了方便日后主题升级，设备更换时能够顺利迁移，同时向参考的一些站点博主表示感谢。</p><span id="more"></span><h2 id="站点参考"><a class="markdownIt-Anchor" href="#站点参考"></a> 站点参考</h2><p>本站参考了一些博客站点的设置及美化，或受其启发，或用到其类似的功能或配置，不能一应俱全的列举出来，都一并表示感谢。</p><div class="site-card-group"> <a class="site-card" href="https://www.itrhx.com/"><div class="img"><img src="https://7.dusays.com/2021/06/24/9c135cc8bfcd3.png" class="lazyload placeholder" data-srcset="https://7.dusays.com/2021/06/24/9c135cc8bfcd3.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/></div><div class="info"><img src="https://www.itrhx.com/images/trhx.png" class="lazyload placeholder" data-srcset="https://www.itrhx.com/images/trhx.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/><span class="title">TRHX’S BLOG</span></div></a> <a class="site-card" href="https://www.heson10.com"><div class="img"><img src="https://7.dusays.com/2020/10/02/3835c34bd8b64.png" class="lazyload placeholder" data-srcset="https://7.dusays.com/2020/10/02/3835c34bd8b64.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/heson525/pic@master/pic/avatar03.png" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/heson525/pic@master/pic/avatar03.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/><span class="title">黑石博客</span></div></a> <a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://7.dusays.com/2021/06/27/e2ea41f4736af.png" class="lazyload placeholder" data-srcset="https://7.dusays.com/2021/06/27/e2ea41f4736af.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/><span class="title">inkss</span></div></a> <a class="site-card" href="https://colsrch.cn"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png" class="lazyload placeholder" data-srcset="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg" class="lazyload placeholder" data-srcset="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/><span class="title">Colsrch</span></div></a> <a class="site-card" href="https://vlts.hin.cool"><div class="img"><img src="https://i.loli.net/2021/04/08/VfYXGSs6M32UeLw.jpg" class="lazyload placeholder" data-srcset="https://i.loli.net/2021/04/08/VfYXGSs6M32UeLw.jpg" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/></div><div class="info"><img src="https://cdn2.hin.cool/pic/my/dl3.png" class="lazyload placeholder" data-srcset="https://cdn2.hin.cool/pic/my/dl3.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif"/><span class="title">W4J1e</span></div></a> </div><h2 id="恶搞标题"><a class="markdownIt-Anchor" href="#恶搞标题"></a> 恶搞标题</h2><p>当用户在访问站点切换到其他网页时，可以呈现恶搞标题效果。</p><ol><li><p>新建 <code>FunnyTitle.js</code></p><p>在主题文件夹<code>\themes\volantis\source\js</code> 中新建 <code>FunnyTitle.js</code> ，在其中添加如下代码：</p><figure class="highlight js"><figcaption><span>\themes\volantis\source\js\FunnyTitle.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浏览器搞笑标题</span></span><br><span class="line"><span class="keyword">var</span> OriginTitle = <span class="built_in">document</span>.title;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.hidden) &#123;</span><br><span class="line">        $(<span class="string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;/funny.ico&quot;</span>);</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">&#x27;╭(°A°`)╮ 呀怎么舍得走哇 ~&#x27;</span>;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(titleTime);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">&#x27;[rel=&quot;icon&quot;]&#x27;</span>).attr(<span class="string">&#x27;href&#x27;</span>, <span class="string">&quot;/favicon.ico&quot;</span>);</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">&#x27;(ฅ&gt;ω&lt;*ฅ) 噫又回来了耶 ~&#x27;</span> + OriginTitle;</span><br><span class="line">        titleTime = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.title = OriginTitle;</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>其中<code>favicon.ico</code> 是正常图标， <code>funny.ico</code> 是用户切换到其它标签后你网站的图标。</p></li><li><p>启用这个 <code>.js</code> 文件</p><p>在 <code>\themes\volantis\layout\layout.ejs</code> 文件中的 <code>&lt;body&gt;</code> 下面添加如下代码：</p><figure class="highlight js"><figcaption><span>\themes\volantis\layout\layout.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--浏览器搞笑标题--&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/FunnyTitle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>另外，也可以将上述 <code>FunnyTitle.js</code>  托管到 <code>Github</code>上，在此引用 <code>jsdelivr</code> 的加速链接。</p></li></ol><h2 id="底部建站时间"><a class="markdownIt-Anchor" href="#底部建站时间"></a> 底部建站时间</h2><ol><li><p>设置 <code>footer.ejs</code>  文件</p><p>这里首先需要设置 <code>footer.ejs</code>  文件，其在 <code>Volantis</code> 主题的位置是 <code>\themes\volantis\layout\_partial\footer.ejs</code> 。在其中的第48行的位置后添加如下代码：</p><figure class="highlight js"><figcaption><span>\themes\volantis\layout\_partial\footer.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (item == <span class="string">&#x27;runtime_count&#x27;</span>) &#123; %&gt;</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;runtime_span&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">show_runtime</span>(<span class="params"></span>)</span>&#123;<span class="built_in">window</span>.setTimeout(<span class="string">&quot;show_runtime()&quot;</span>,<span class="number">1000</span>);X=<span class="keyword">new</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">Date</span>(<span class="string">&quot;5/25/2021 00:00:00&quot;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        Y=<span class="keyword">new</span> <span class="built_in">Date</span>();T=(Y.getTime()-X.getTime());M=<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">1000</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        a=T/M; dnum=<span class="built_in">Math</span>.floor(a); b=(a-dnum)*<span class="number">24</span>; hnum=<span class="built_in">Math</span>.floor(b);c=(b-hnum)*<span class="number">60</span>; mnum=<span class="built_in">Math</span>.floor((b-hnum)*<span class="number">60</span>); snum=<span class="built_in">Math</span>.floor((c-mnum)*<span class="number">60</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        runtime_span.innerText =<span class="string">&quot;⚡&quot;</span>+<span class="string">&quot;本站在风雨飘摇中度过了 &quot;</span> + dnum + <span class="string">&quot; 天 &quot;</span> + hnum + <span class="string">&quot; 小时 &quot;</span> + mnum + <span class="string">&quot; 分 &quot;</span> + snum + <span class="string">&quot; 秒&quot;</span> + <span class="string">&quot;⚡&quot;</span>&#125;;show_runtime();</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>可以根据需要修改 <code>runtime_span.innerText</code> 中的文本。</p><p>注意 <code>item == 'runtime_count'</code> 其中 <code>runtime_count</code> 可以自定义，在主题配置文件中引用相同的名称即可。需要引用的内容只有 <code>&lt;span id=&quot;runtime_span&quot;&gt;&lt;/span&gt;</code>，具体看下面。</p></li><li><p>启用该设置</p><p>在 <code>Volantis</code> 中启用它，找到 <code>site_footer</code> 部分，在其下加入：</p><figure class="highlight yml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtime_count:</span></span><br><span class="line">  <span class="string">&lt;span</span> <span class="string">id=&quot;runtime_span&quot;&gt;&lt;/span&gt;</span></span><br></pre></td></tr></table></figure><p>别忘了在前面的 <code>layout:[]</code> 部分中加入 <code>runtime_count</code> 。</p></li></ol><h2 id="网页弹窗"><a class="markdownIt-Anchor" href="#网页弹窗"></a> 网页弹窗</h2><p>这里主要运用 <code>javascript</code> 插件 ：[ <a href="https://sweetalert.js.org/docs/"><code>Sweetalert</code></a> 、<a href="https://github.com/t4t5/sweetalert"><code>Sweetalert-github</code></a>]</p><p>具体安装和使用方法可见其 <a href="https://sweetalert.js.org/docs/"><code>官网</code></a> 和 <a href="https://github.com/t4t5/sweetalert"><code>Github</code></a> 。我采用了直接引用的方法。</p><p>在 <code>\themes\volantis\layout\_partial\head.ejs</code> 文件中的第二行 <code>&lt;meta charset=&quot;utf-8&quot;&gt;</code> 后加入：</p><figure class="highlight js"><figcaption><span>\themes\volantis\layout\_partial\head.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;&lt;!-- 在此后加入 --&gt;</span><br><span class="line">&lt;!-- Sweetalert弹窗显示 --&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/sweetalert/dist/sweetalert.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>或者使用 <code>jsdeliver</code> ：</p><figure class="highlight js"><figcaption><span>\themes\volantis\layout/_partial/head.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;&lt;!-- 在此后加入 --&gt;</span><br><span class="line">&lt;!-- Sweetalert弹窗显示 --&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/sweetalert&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>并由此实现了以下几个功能 (目前网页只保留了2) ：</p><ol><li>进入网站弹窗</li><li>复制网站内容弹窗<ul><li>复制代码弹窗</li><li>右键复制弹窗</li></ul></li><li>网站弹窗+自动切换暗黑主题</li></ol><h3 id="进入网站弹窗"><a class="markdownIt-Anchor" href="#进入网站弹窗"></a> 进入网站弹窗</h3><p>这里参考了：<a href="https://luosw.fun/post/e281.html">https://luosw.fun/post/e281.html</a> ，但这篇博文提到的关于自动调整暗黑模式+弹窗的逻辑反了，随后又看了一下<code>colsrch</code> 大佬的博文  <a href="https://colsrch.cn/posts/9eae9d7b/">https://colsrch.cn/posts/9eae9d7b/</a></p><p>这里直接设置 <code>\themes\volantis\layout\index.ejs</code> 文件就可以了，在其开头加入：</p><figure class="highlight js"><figcaption><span>\themes\volantis\layout\index.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 网页访问欢迎弹窗 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">swal(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">title</span>: <span class="string">&#x27;花径不曾缘客扫，蓬门今始为君开。&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">text</span>: <span class="string">&quot;在下是博主hemitlsr，这里作为个人学习生活的记录而存在。\n 在这里可以看博文，玩游戏，交朋友。\n 欢迎留言，交换友链。\n 但请不要留下不友好的痕迹，不然在下隔着屏幕咬你啊。&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">icon</span>: <span class="string">&#x27;https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/rickavatar.png&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">button</span>: <span class="string">&quot;好的，已知晓&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>这里 <code>swal()</code> 是引用该弹窗的函数，其有四个可选参数：<code>title</code> 、<code>text</code> 、<code>icon</code>  、<code>button</code> 。其中 <code>icon</code> 有四个默认的选项，可设置为 <code>icon</code> 图标，这里在下使用的是图片。</p><h3 id="复制网站内容弹窗"><a class="markdownIt-Anchor" href="#复制网站内容弹窗"></a> 复制网站内容弹窗</h3><h4 id="复制代码弹窗"><a class="markdownIt-Anchor" href="#复制代码弹窗"></a> 复制代码弹窗</h4><p>这里需要设置 <code>layout\third-party\clipboard\script.ejs</code> 文件，在后20行 <code>clipboard.off('success').on('success', function (e) &#123;&#125;</code> 中：</p><figure class="highlight js"><figcaption><span>layout\third-party\clipboard\script.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 复制代码弹窗 --&gt;</span><br><span class="line">swal(&#123;</span><br><span class="line"><span class="attr">title</span>: <span class="string">&#x27;复制成功&#x27;</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;代码已复制，请遵守相关授权协议。\n 转载请记得注明出处&quot;</span>,</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">    <span class="attr">button</span>: <span class="string">&quot;我承诺遵守&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="右键复制弹窗"><a class="markdownIt-Anchor" href="#右键复制弹窗"></a> 右键复制弹窗</h4><p>这里需要设置两项内容：</p><ul><li>链接地址复制弹窗</li><li>文本复制弹窗</li></ul><p>均在 <code>layout\_partial\rightmenu.ejs</code> 文件中进行设置</p><ol><li><p>链接地址复制弹窗</p><p>在上述文件末尾的 <code>function copyString(str) &#123;&#125;</code> 函数中 <code>document.body.removeChild(input);</code> 后面添加如下内容：</p><figure class="highlight js"><figcaption><span>layout\_partial\rightmenu.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 右键菜单栏复制弹窗 --&gt;</span><br><span class="line">swal(&#123;</span><br><span class="line"><span class="attr">title</span>: <span class="string">&#x27;复制成功&#x27;</span>,</span><br><span class="line"><span class="attr">text</span>: <span class="string">&quot;文本/链接已复制，请遵守相关授权协议。\n 转载请记得注明出处&quot;</span>,</span><br><span class="line"><span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line"><span class="attr">button</span>: <span class="string">&quot;我承诺遵守&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>文本复制弹窗</p><p>还是在上述文件中，找到 <code>if ('&lt;%= theme.plugins.clipboard.enable %&gt;' == 'true') &#123;&#125;</code>将其设置为如下：</p><figure class="highlight js"><figcaption><span>layout\_partial\rightmenu.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;&lt;%= theme.plugins.clipboard.enable %&gt;&#x27;</span> == <span class="string">&#x27;true&#x27;</span>) &#123;</span><br><span class="line">    &lt;!-- 文本复制弹窗 --&gt;</span><br><span class="line">    <span class="keyword">let</span> str_luosw = <span class="built_in">window</span>.getSelection().toString();</span><br><span class="line"></span><br><span class="line">    copyText.style.display = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">    hrText.style.display = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">    &lt;!-- 文本复制弹窗 --&gt;</span><br><span class="line">    copyText.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    copyString(str_luosw);</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">    <span class="attr">once</span>: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="网站弹窗自动切换暗黑主题"><a class="markdownIt-Anchor" href="#网站弹窗自动切换暗黑主题"></a> 网站弹窗+自动切换暗黑主题</h3><p>这里需要设置的是 <code>layout\_partial\scripts\darkmode.ejs</code>  。</p><p>首先在该文件开头第一行加入：</p><figure class="highlight js"><figcaption><span>layout\_partial\scripts\darkmode.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/hermitlsr/CDN@master/judge_time/js.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>再在文件底部 <code>&lt;script&gt;</code> 前加入：</p><details ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight js"><figcaption><span>layout\_partial\scripts\darkmode.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 自动夜间模式加弹窗 --&gt;</span><br><span class="line"><span class="comment">// 自动夜间模式</span></span><br><span class="line">  <span class="keyword">if</span> (navigator.geolocation) &#123; <span class="comment">//获取地理位置 用于判断日出日落时间</span></span><br><span class="line">    navigator.geolocation.getCurrentPosition(</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">position</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> res = computeSunRiseSunSet(position.coords.latitude, position.coords.longitude, <span class="number">8</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(res.str)</span><br><span class="line">        adjust_time(res.strSunRise, res.strSunSet, <span class="string">&quot;08:00&quot;</span>, <span class="string">&quot;12:00&quot;</span>, <span class="string">&quot;14:00&quot;</span>, <span class="string">&quot;23:00&quot;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        adjust_time(<span class="string">&quot;7:00&quot;</span>, <span class="string">&quot;17:30&quot;</span>, <span class="string">&quot;08:00&quot;</span>, <span class="string">&quot;12:00&quot;</span>, <span class="string">&quot;14:00&quot;</span>, <span class="string">&quot;23:00&quot;</span>) <span class="comment">//未允许获取地理位置时，使用默认时间</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;未允许获取地理位置，使用默认配置时间&quot;</span>)</span><br><span class="line">        <span class="keyword">throw</span> (e.message);</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">adjust_time</span>(<span class="params">beginTime, endTime, morningTime, noonTime, afternoonTime, nightTime</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> rootElement = <span class="built_in">document</span>.documentElement;</span><br><span class="line">    <span class="keyword">var</span> strb = beginTime.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (strb.length != <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> stre = endTime.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (stre.length != <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> strmorning = morningTime.split(<span class="string">&quot;:&quot;</span>); <span class="comment">//12点</span></span><br><span class="line">    <span class="keyword">if</span> (stre.length != <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> strnoon = noonTime.split(<span class="string">&quot;:&quot;</span>); <span class="comment">//12点</span></span><br><span class="line">    <span class="keyword">if</span> (stre.length != <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> strafternoon = afternoonTime.split(<span class="string">&quot;:&quot;</span>); <span class="comment">//13点</span></span><br><span class="line">    <span class="keyword">if</span> (stre.length != <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> strnight = nightTime.split(<span class="string">&quot;:&quot;</span>); <span class="comment">//23点</span></span><br><span class="line">    <span class="keyword">if</span> (stre.length != <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> e = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> n = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> morning = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> noon = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> afternoon = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> night = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line">    b.setHours(strb[<span class="number">0</span>]);</span><br><span class="line">    b.setMinutes(strb[<span class="number">1</span>]);</span><br><span class="line">    e.setHours(stre[<span class="number">0</span>]);</span><br><span class="line">    e.setMinutes(stre[<span class="number">1</span>]);</span><br><span class="line">    morning.setHours(strmorning[<span class="number">0</span>]);</span><br><span class="line">    morning.setMinutes(strmorning[<span class="number">1</span>]);</span><br><span class="line">    noon.setHours(strnoon[<span class="number">0</span>]);</span><br><span class="line">    noon.setMinutes(strnoon[<span class="number">1</span>]);</span><br><span class="line">    afternoon.setHours(strafternoon[<span class="number">0</span>]);</span><br><span class="line">    afternoon.setMinutes(strafternoon[<span class="number">1</span>]);</span><br><span class="line">    night.setHours(strnight[<span class="number">0</span>]);</span><br><span class="line">    night.setMinutes(strnight[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//在这里面处理获得的数据</span></span><br><span class="line">    <span class="keyword">if</span> (n.getTime() - b.getTime() &gt; <span class="number">0</span> &amp;&amp; n.getTime() - e.getTime() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> daytimetitle = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">var</span> daytimemessage = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">if</span> (n.getTime() - morning.getTime() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 早上</span></span><br><span class="line">        daytimetitle = <span class="string">&quot;早安( •̀ ω •́ )✧&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n.getTime() - noon.getTime() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 上午</span></span><br><span class="line">        daytimetitle = <span class="string">&quot;上午好§(*￣▽￣*)§&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n.getTime() - afternoon.getTime() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 中午</span></span><br><span class="line">        daytimetitle = <span class="string">&quot;中午好( *︾▽︾)&quot;</span>;</span><br><span class="line">        daytimemessage = <span class="string">&quot;Hi~ o(*￣▽￣*)ブ要注意休息哦&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 下午</span></span><br><span class="line">        daytimetitle = <span class="string">&quot;下午好&quot;</span>;</span><br><span class="line">      &#125; <span class="comment">// 判断是否已经开启夜间模式</span></span><br><span class="line">      <span class="keyword">if</span> (rootElement.getAttribute(<span class="string">&#x27;data-user-color-scheme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>)) &#123; <span class="comment">// 已开启夜间模式，修改按钮状态</span></span><br><span class="line">          swal(<span class="string">&quot;操作通知&quot;</span>, daytimetitle + <span class="string">&quot;，已自动为您切换为日间模式。&quot;</span> + daytimemessage, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">          <span class="keyword">const</span> mode = toggleCustomDarkMode();</span><br><span class="line">          applyCustomDarkModeSettings(mode);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// 未开启夜间模式，不执行操作</span></span><br><span class="line">        swal(daytimetitle, daytimemessage, <span class="string">&quot;info&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// 晚上</span></span><br><span class="line">      <span class="keyword">var</span> nighttitle = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">var</span> nightmessage = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">if</span> (night.getTime() - n.getTime() &lt; <span class="number">0</span> || n.getTime() - b.getTime() &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        nighttitle = <span class="string">&quot;夜深了&quot;</span>;</span><br><span class="line">        nightmessage = <span class="string">&quot;该睡觉啦(∪.∪ )...zzz&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        nighttitle = <span class="string">&quot;晚上好&quot;</span>;</span><br><span class="line">        nightmessage = <span class="string">&quot;吃晚饭了吗？要注意眼睛哦(づ￣ 3￣)づ&quot;</span>;</span><br><span class="line">      &#125; <span class="comment">// 判断是否已经开启夜间模式</span></span><br><span class="line">      <span class="keyword">if</span> (rootElement.getAttribute(<span class="string">&#x27;data-user-color-scheme&#x27;</span>, <span class="string">&#x27;dark&#x27;</span>)) &#123; <span class="comment">// 已开启夜间模式，不执行操作</span></span><br><span class="line">          swal(nighttitle, nightmessage, <span class="string">&quot;info&quot;</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; <span class="comment">// 未开启夜间模式，修改按钮状态</span></span><br><span class="line">          swal(<span class="string">&quot;操作通知&quot;</span>, nighttitle + <span class="string">&quot;，已自动为您切换为夜间模式。&quot;</span> + nightmessage, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">          <span class="keyword">const</span> mode = toggleCustomDarkMode();</span><br><span class="line">          applyCustomDarkModeSettings(mode);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="百宝箱页面设置"><a class="markdownIt-Anchor" href="#百宝箱页面设置"></a> 百宝箱页面设置</h2><p><img src="https://7.dusays.com/2021/06/28/3e2db8bfceefc.png" class="lazyload placeholder" data-srcset="https://7.dusays.com/2021/06/28/3e2db8bfceefc.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="image.png" /></p><p>这是 <a href="http://viggoz.com/"><code>Viggo</code></a> 大佬制作的一个网站导航项目 <a href="https://github.com/WebStackPage/WebStackPage.github.io"><code>WebStackPage</code></a>，并由 <a href="https://www.hclonely.com/"><code>HCLonely</code></a> 制作为 <a href="https://github.com/HCLonely/hexo-theme-webstack"><code>hexo-theme-webstack</code></a></p><p>引用这个页面实际上是做一个新的主题网页，使用二级域名指向它。也可以做成分站形式，但是对于这样需要经常添加修改的网页不是很方便。</p><p>这里具体可以参考：</p><ul><li>黑石大佬：<a href="https://www.heson10.com/posts/46324.html">为Hexo博客建立其他主题分站</a></li><li>诗颂：<a href="https://hassanwong.top/posts/61c6c2e8/#%E5%8F%AF%E8%83%BD%E6%9C%89%E7%9A%84%E5%85%AB%E9%98%BF%E5%93%A5">搭建Hexo-WebStack网址导航</a></li></ul><p>我主要是在页面抬头位置添加了几个链接，并引入了心知天气插件，这部分也是参考了黑石大佬和TRXH的百宝箱页面。</p><p>在主题文件夹下设置 <code>themes/webstack/index.js</code> 文件：</p><figure class="highlight js"><figcaption><span>themes/webstack/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;hover-line&quot;</span> style=<span class="string">&quot;min-height: 75px;&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:500&quot;</span>&gt;</span>博客首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>   &lt;!--https:<span class="comment">//www.hermitlsr.top--&gt;</span></span><br><span class="line">&lt;/li&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;hover-line&quot;</span> <span class="attr">style</span>=<span class="string">&quot;min-height: 75px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.hermitlsr.top/categories/&quot;</span>&gt;</span>文章分类 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;hover-line&quot;</span> <span class="attr">style</span>=<span class="string">&quot;min-height: 75px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.hermitlsr.top/messages/&quot;</span>&gt;</span>留言灌水 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;hover-line&quot;</span> <span class="attr">style</span>=<span class="string">&quot;min-height: 75px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.hermitlsr.top/friends/&quot;</span>&gt;</span>友情链接 <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>引入心知天气插件，这部分主题代码可以直接在<a href="https://www.seniverse.com/">心知天气官网</a>生成：</p><figure class="highlight js"><figcaption><span>themes/webstack/index.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  &lt;li <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;hover-line&quot;</span> style=<span class="string">&quot;min-height: 75px; &quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tp-weather-widget&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding: 25px 20px !important; &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      (<span class="function"><span class="keyword">function</span>(<span class="params">a,h,g,f,e,d,c,b</span>)</span>&#123;b=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;d=h.createElement(g);c=h.getElementsByTagName(g)[<span class="number">0</span>];d.src=e;d.charset=<span class="string">&quot;utf-8&quot;</span>;d.async=<span class="number">1</span>;c.parentNode.insertBefore(d,c)&#125;;a[<span class="string">&quot;SeniverseWeatherWidgetObject&quot;</span>]=f;a[f]||(a[f]=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;(a[f].q=a[f].q||[]).push(<span class="built_in">arguments</span>)&#125;);a[f].l=+<span class="keyword">new</span> <span class="built_in">Date</span>();<span class="keyword">if</span>(a.attachEvent)&#123;a.attachEvent(<span class="string">&quot;onload&quot;</span>,b)&#125;<span class="keyword">else</span>&#123;a.addEventListener(<span class="string">&quot;load&quot;</span>,b,<span class="literal">false</span>)&#125;&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>,<span class="string">&quot;script&quot;</span>,<span class="string">&quot;SeniverseWeatherWidget&quot;</span>,<span class="string">&quot;//cdn.sencdn.com/widget2/static/js/bundle.js?t=&quot;</span>+<span class="built_in">parseInt</span>((<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() / <span class="number">100000000</span>).toString(),<span class="number">10</span>)));</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">window</span>.SeniverseWeatherWidget(<span class="string">&#x27;show&#x27;</span>, &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">flavor</span>: <span class="string">&quot;slim&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">location</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">geolocation</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">language</span>: <span class="string">&quot;zh-Hans&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">unit</span>: <span class="string">&quot;c&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">theme</span>: <span class="string">&quot;auto&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">token</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">hover</span>: <span class="string">&quot;enabled&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">container</span>: <span class="string">&quot;tp-weather-widget&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>注意 <code>style=&quot;padding: 29px 20px;</code> 这里设置的数值是为了使其与其他元素保持水平。</p><p>由于心知天气会自定义样式，为了保持样式一致，还重新定义了字体颜色，在 <code>source\css\hclonely.css</code> 中设置如下：</p><figure class="highlight css"><figcaption><span>source\css\hclonely.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dsrBSL</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#979898</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="导航栏全屏以及页面透明度"><a class="markdownIt-Anchor" href="#导航栏全屏以及页面透明度"></a> 导航栏全屏以及页面透明度</h2><h3 id="导航栏全屏"><a class="markdownIt-Anchor" href="#导航栏全屏"></a> 导航栏全屏</h3><p>当时看到几个博客页面导航栏占据全屏之后设置透明效果还蛮好看，就迫不及待自己搞一搞，当然纯靠 <code>F12</code> 的方法失败了，最后这个是 <code>inkss</code> 大佬提供的方法。后面又去 <code>Volantis</code> 官方文档里翻东西的时候偶然发现这个问题在鸣谢板块的评论区有一个很长的讨论，更觉得当时自己很憨了。</p><img src="https://7.dusays.com/2021/06/27/6725fa20a1b52.png" class="lazyload placeholder" data-srcset="https://7.dusays.com/2021/06/27/6725fa20a1b52.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="image.png" style="zoom: 67%;" /><p>在 <code>\source\css\_layout\main.styl</code> 文件下按上述方法进行设置：</p><figure class="highlight stylus"><figcaption><span>\source\css\_layout\main.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.l_header</span></span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: $device-<span class="number">2</span>k)</span><br><span class="line">    left: <span class="number">0</span> !important</span><br><span class="line">    border-radius: <span class="number">0</span> !important</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span> !important</span><br></pre></td></tr></table></figure><p>在添加对移动端的设置</p><figure class="highlight stylus"><figcaption><span>\source\css\_layout\main.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调整移动端的显示</span></span><br><span class="line"><span class="selector-id">#safearea</span></span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: $device-mobile)</span><br><span class="line">    margin: <span class="number">16px</span> <span class="number">0</span> <span class="number">0</span> !important</span><br><span class="line">    box-shadow: none !important</span><br><span class="line">    #l_main</span><br><span class="line">      article#comments,</span><br><span class="line">      article#friends,</span><br><span class="line">      article#post,</span><br><span class="line">      article#page,</span><br><span class="line">      article#arc      </span><br><span class="line">        border-radius: <span class="number">0</span> !important</span><br><span class="line">        margin-top: -<span class="number">16px</span> !important</span><br><span class="line">      article#cat,</span><br><span class="line">      article#tag</span><br><span class="line">        margin: -<span class="number">16px</span> -<span class="number">16px</span> <span class="number">0</span> !important</span><br></pre></td></tr></table></figure><h3 id="页面透明度"><a class="markdownIt-Anchor" href="#页面透明度"></a> 页面透明度</h3><p>这里使用了 <code>F12</code> 大法。页面透明度这里需要对 <code>导航栏</code>，<code>侧边栏</code>以及<code>文章主体</code> 三个位置分别进行设置。这里顺便调整了侧边栏的宽度。</p><figure class="highlight stylus"><figcaption><span>\source\css\_layout\main.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.l_header</span><span class="selector-class">.auto</span><span class="selector-class">.show</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.l_side</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span> <span class="meta">!important</span>;  <span class="comment">//不合适的设置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.l_main</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.95</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: calc(<span class="number">100%</span> - <span class="number">1</span> * <span class="number">300px</span>) <span class="meta">!important</span>; <span class="comment">//不合适的设置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另外侧边栏宽度和文章总宽度在 <code>Volantis</code> 主题中有一个总长度设置：<code>max_width: 1270px</code>。<br />页面宽度的设置已经取消了，由于固定了 <code>.l_side</code> 在移动端的距离就不会自动变化，就会导致 <code>.l_main</code> 部分变窄。这里直接修改 <code>layout.styl</code> ，其定义了侧边栏的基本参数，位于 <code>volantis\source\css\_defines\layout.styl</code> 。将其中 <code>$sidebar</code> 这个参数设置为 <code>260px</code></p><h2 id="念两句诗"><a class="markdownIt-Anchor" href="#念两句诗"></a> 念两句诗</h2><p><code>Volantis</code> 主题本身就集成了一个<code>每日一诗</code> 在侧边栏的 <code>blogger</code> 中，在下想用这类似的插件来修饰页面，于是就引入了 <code>今日诗词</code> 插件：</p><p><img src="https://7.dusays.com/2021/06/27/3c5c3116e6e5a.png" class="lazyload placeholder" data-srcset="https://7.dusays.com/2021/06/27/3c5c3116e6e5a.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="image.png" /></p><ol><li><p>首先设置样式</p><p>在 <code>\source\css\_layout\main.styl</code> 中加入：</p><details ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight stylus"><figcaption><span>\source\css\_layout\main.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 念两句诗</span></span><br><span class="line"><span class="selector-class">.poem-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">730px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">80%</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#797979</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: none <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">80px</span> auto <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.poem-left</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.poem-right</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.poem-border</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">2px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">35%</span><span class="meta">!important</span>; <span class="comment">//调整框线的长度</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#797979</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.poem-wrap</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">70%</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#797979</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.poem-wrap</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">100px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">12px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#797979</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid rgba(<span class="number">68</span>,<span class="number">68</span>,<span class="number">68</span>,<span class="number">0</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.poem-wrap</span> p<span class="selector-id">#poem</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">25px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.poem-wrap</span> p<span class="selector-id">#info</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> auto<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details></li><li><p>在需要的地方加入 <code>Html</code> 语句</p><p>具体细节可以参考 <a href="https://www.jinrishici.com/">今日诗词官网</a></p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;poem-wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;poem-border poem-left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;poem-border poem-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>留言板<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;poem&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://sdk.jinrishici.com/v2/browser/jinrishici.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    jinrishici.load(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> sentence = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#poem&quot;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> info_in = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#info&quot;</span>)</span></span><br><span class="line"><span class="javascript">    sentence.innerHTML = result.data.content</span></span><br><span class="line"><span class="javascript">    info_in.innerHTML = <span class="string">&#x27;【&#x27;</span> + result.data.origin.dynasty + <span class="string">&#x27;】&#x27;</span> + result.data.origin.author + <span class="string">&#x27;《&#x27;</span> + result.data.origin.title + <span class="string">&#x27;》&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="页面的头像信息设置"><a class="markdownIt-Anchor" href="#页面的头像信息设置"></a> 页面的头像信息设置</h2><p><img src="https://7.dusays.com/2021/06/27/070ed1f6796b0.png" class="lazyload placeholder" data-srcset="https://7.dusays.com/2021/06/27/070ed1f6796b0.png" srcset="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="image.png" /></p><p>这里参考了 <code>TRHX</code> 大佬的样式，然后直接用了一个较为简单的方法呈现出来：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://hermitlsr.top/about/&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/rickavatar.png&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span> <span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.hermitlsr.top/atom.xml&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;RSS&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">title</span>=<span class="string">&quot;RSS&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-rss&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:1165749128@qq.com&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;Email&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">title</span>=<span class="string">&quot;Email&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-envelope&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/hermitlsr&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;GitHub&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">title</span>=<span class="string">&quot;GitHub&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fab fa-github&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://wpa.qq.com/msgrd?v=3<span class="symbol">&amp;amp;</span>uin=1165749128<span class="symbol">&amp;amp;</span>site=qq<span class="symbol">&amp;amp;</span>menu=yes&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;QQ&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">title</span>=<span class="string">&quot;QQ&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fab fa-qq&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="公式加载问题"><a class="markdownIt-Anchor" href="#公式加载问题"></a> 公式加载问题</h2><p>安装配置  <code>KaTeX</code>  基本没有问题 ，但是公式渲染还是有问题，这里根据官方推荐，参考了 <a href="https://www.micdz.cn/article/katex-on-volantis/">https://www.micdz.cn/article/katex-on-volantis/</a> ，完美解决。做法就是在 <code>themes\volantis\layout\_partial\head.ejs</code> 文件的最后添加：</p><figure class="highlight js"><figcaption><span>themes\volantis\layout\_partial\head.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css&quot;</span> integrity=<span class="string">&quot;sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq&quot;</span> crossorigin=<span class="string">&quot;anonymous&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- The loading <span class="keyword">of</span> KaTeX is deferred to speed up page rendering --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    &lt;!-- To automatically render math <span class="keyword">in</span> text elements, include the auto-render extension: --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onload</span>=<span class="string">&quot;renderMathInElement(document.body);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="电子时钟部件"><a class="markdownIt-Anchor" href="#电子时钟部件"></a> 电子时钟部件</h2><p>使用了插件：<code>hexo-electric-clock</code>   参考了： <code>https://zfe.space/post/hexo-electric-clock.html</code></p><p>该插件可以自动获取访问者的 ip 地址，同时以此 ip 地址展示天气时间等信息</p><p>步骤：</p><ol><li>下载该插件</li><li>配置插件</li><li>调整 <code>css</code> 样式</li></ol><h3 id="下载该插件"><a class="markdownIt-Anchor" href="#下载该插件"></a> 下载该插件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-electric-clock --save</span><br></pre></td></tr></table></figure><p>按照参考中的建议，需要加上 <code>--save</code> 否则本地预览可能不生效。</p><h3 id="插件配置"><a class="markdownIt-Anchor" href="#插件配置"></a> 插件配置</h3><p>在博客根目录的配置文档 <code>_config.yml</code> 中 加入：</p><figure class="highlight yaml"><figcaption><span>../_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 电子钟</span></span><br><span class="line"><span class="attr">electric_clock:</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">layout:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">clock</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">temple_html:</span> <span class="string">&#x27;&lt;div class=&quot;card-widget card-clock&quot;&gt;&lt;div class=&quot;card-glass&quot;&gt;&lt;div class=&quot;card-background&quot;&gt;&lt;div class=&quot;card-content&quot;&gt;&lt;div id=&quot;hexo_electric_clock&quot;&gt;&lt;img id=&quot;card-clock-loading&quot; src=&quot;https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif&quot; style=&quot;height: 120px; width: 100%;&quot; data-ll-status=&quot;loading&quot; class=&quot;entered loading&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span></span><br></pre></td></tr></table></figure><p>主要需要修改的地方是 <code>layout</code> ，它决定了电子时钟的具体位置。<code>type</code> 有两个选项 <code>class</code> 和 <code>id</code> 对应着 <code>Html</code> 中的两种属性。其中 <code>class</code> 不具有唯一性，在一个小块中，常常有多个 <code>class</code> 嵌套，这就需要使用 <code>index</code> 指定是第几个 <code>class</code> 。这里为求方便，我在需要展示电子钟的位置新增了 一个<code>id</code>。</p><p>我希望放的位置是侧边栏的公告栏部分，在 <code>Volantis</code> 主题中，这是以文本部件的形式呈现 ( <code>class: widget text shadow floatable desktop</code> )，需要在 <code>content</code> 部分增加 <code>id</code> 。在主题文件夹中找到 <code>..\volantis\layout\_widget\text.ejs</code> 文件，在第4行 <code>&lt;div class='content'&gt;</code> 之后加入：</p><figure class="highlight plaintext"><figcaption><span>..\volantis\layout\_widget\text.ejs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;clock&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;clock&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>在其他部件中加入同理。</p><h3 id="调整-css-样式"><a class="markdownIt-Anchor" href="#调整-css-样式"></a> 调整 <code>css</code> 样式</h3><p>这里是根据自己的喜好进行设置。</p><p>在主题文件 <code>\source\css\_layout\main.styl</code> 文件中加入：</p><figure class="highlight stylus"><figcaption><span>\source\css\_layout\main.styl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.card-background</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: auto <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然，也可以在插件的 <code>css</code> 中直接修改，位置是 <code>..\node_modules\hexo-electric-clock\clock.css</code></p><h2 id="增加朋友圈"><a class="markdownIt-Anchor" href="#增加朋友圈"></a> 增加朋友圈</h2><p>该功能由小冰大佬完成的，可以将友链网站中更新的文章集中展示，目前支持 volantis、butterfly 等五个主题的友链爬取，以及github和gitee友链的爬取，已经更新到 <code>beta1.5</code> 还在继续开发，可参见:<br />原项目地址：<a href="https://github.com/Rock-Candy-Tea/hexo-circle-of-friends">https://github.com/Rock-Candy-Tea/hexo-circle-of-friends</a><br />配置教程：<a href="https://zfe.space/post/friend-link-circle.html">https://zfe.space/post/friend-link-circle.html</a></p><p>配置的过程中遇到一些坑</p><ol><li><code>_config.yml</code> 中的 <code>github</code> 和 <code>gitee</code> 都需要取消注释，不需要的部分设置 <code>enable=false</code>。</li><li>如果在自己的友链界面加入了自己的链接，可以设置 <code>if user_info[1] != '你的链接':</code> ，排除自己的文章。</li><li>配置好后，一般是整点开始爬取，所以会延迟生效，不用担心没配置好。</li><li>在 <code>volantis</code> 中配置只需要新建一个 <code>page</code> ，然后加入 <code>&lt;div id=&quot;moments_container&quot;&gt;&lt;script src=&quot;/js/moments.js&quot;&gt;&lt;/script&gt;&lt;/div&gt;</code> 即可。</li></ol><h2 id="文章永久链接"><a class="markdownIt-Anchor" href="#文章永久链接"></a> 文章永久链接</h2><p>之前采用重设 <code>urlname</code> 的方式避免中文标题的编码问题，但是每次写文章都要自己输入一次，太麻烦。现在采用 <code>hexo-abbrlink</code> 插件进行生成。仅需在站点根目录的 <code>_config.yml</code> 中做如下设置</p><figure class="highlight yaml"><figcaption><span>\_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">:year-:month-:day/:abbrlink.html</span>  </span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">    <span class="attr">alg:</span> <span class="string">crc32</span>   <span class="comment">#算法： crc16(default) and crc32</span></span><br><span class="line">    <span class="attr">rep:</span> <span class="string">hex</span>     <span class="comment">#进制： dec(default) and hex</span></span><br></pre></td></tr></table></figure><p>最终生成的本文链接形式：<code>http://localhost:4000/2021-06-26/40ecd548.html</code></p><h2 id="未完待续"><a class="markdownIt-Anchor" href="#未完待续"></a> …未完待续</h2>]]></content>
    
    
    <summary type="html">&lt;p&gt;  本文记录了自己建站时操作的一些内容，或简或繁，主要是为了方便日后主题升级，设备更换时能够顺利迁移，同时向参考的一些站点博主表示感谢。&lt;/p&gt;</summary>
    
    
    
    <category term="Hexo" scheme="https://www.hermitlsr.top/categories/Hexo/"/>
    
    <category term="建站" scheme="https://www.hermitlsr.top/categories/Hexo/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="Hexo" scheme="https://www.hermitlsr.top/tags/Hexo/"/>
    
    <category term="Volantis" scheme="https://www.hermitlsr.top/tags/Volantis/"/>
    
  </entry>
  
  <entry>
    <title>时序分析-ARMA(1,1)和AR(2)自相关函数的R语言实现</title>
    <link href="https://www.hermitlsr.top/2021-06-23/69ad6eed.html"/>
    <id>https://www.hermitlsr.top/2021-06-23/69ad6eed.html</id>
    <published>2021-06-23T14:05:58.000Z</published>
    <updated>2021-07-13T04:04:35.975Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>  学习《时间序列分析及应用·Jonathan D.Cryer &amp; Kung-Sik Chan 著》一书时的相关笔记——本文介绍了ARMA(1,1)模型和AR(2)模型的自相关函数的R语言实现。</p><span id="more"></span><h2 id="arma11模型"><a class="markdownIt-Anchor" href="#arma11模型"></a> ARMA(1,1)模型</h2><h3 id="arma11模型的自相关函数"><a class="markdownIt-Anchor" href="#arma11模型的自相关函数"></a> ARMA(1,1)模型的自相关函数</h3><p>  模型定义的方程是：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>ϕ</mi><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub><mo>−</mo><mi>θ</mi><msub><mi>e</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">Y_t=\phi Y_{t-1}+e_t-\theta e_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord mathdefault">ϕ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>为得到Yule-Walk形式的方程组，首先：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mi>t</mi></msub><msub><mi>Y</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>E</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>ϕ</mi><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub><mo>−</mo><mi>θ</mi><msub><mi>e</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><msubsup><mi>σ</mi><mi>e</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">E(e_tY_t)=E(e_t(\phi Y_{t-1}+e_t-\theta e_{t-1}))=\sigma^2_e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">ϕ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1111079999999998em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">e</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>或</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><msub><mi>Y</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>E</mi><mo stretchy="false">(</mo><msub><mi>e</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>ϕ</mi><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub><mo>−</mo><mi>θ</mi><msub><mi>e</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>ϕ</mi><mo>−</mo><mi>θ</mi><mo stretchy="false">)</mo><msubsup><mi>σ</mi><mi>e</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">E(e_{t-1}Y_t)=E(e_{t-1}(\phi Y_{t-1}+e_t-\theta e_{t-1}))=(\phi-\theta)\sigma^2_e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">ϕ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">e</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>在其定义式两边乘以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">Y_{t-k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>并求期望值，得到：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>γ</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>ϕ</mi><msub><mi>γ</mi><mn>1</mn></msub><mo>+</mo><mo stretchy="false">[</mo><mn>1</mn><mo>−</mo><mi>θ</mi><mo stretchy="false">(</mo><mi>ϕ</mi><mo>−</mo><mi>θ</mi><mo stretchy="false">)</mo><msubsup><mi>σ</mi><mi>e</mi><mn>2</mn></msubsup><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>γ</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>ϕ</mi><msub><mi>γ</mi><mn>0</mn></msub><mo>−</mo><mi>θ</mi><msubsup><mi>σ</mi><mi>e</mi><mn>2</mn></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>γ</mi><mi>k</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>ϕ</mi><msub><mi>γ</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow></mstyle></mtd></mtr></mtable><mo fence="true">}</mo></mrow><annotation encoding="application/x-tex">\left.\begin{aligned} \gamma_0 &amp; =\phi\gamma_1+[1-\theta(\phi-\theta)\sigma^2_e]\\ \gamma_1 &amp; = \phi\gamma_0-\theta\sigma^2_e\\ \gamma_k &amp; =\phi\gamma_{k-1} \end{aligned} \right \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.548216em;vertical-align:-2.024108em;"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.524108em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.135892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.6358920000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.024108em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.524108em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">ϕ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mopen">(</span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">e</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span><span style="top:-3.135892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">ϕ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">e</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.6358920000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">ϕ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.024108em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35002em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎭</span></span></span><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎬</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎫</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>求解前两个方程得到：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>γ</mi><mn>0</mn></msub><mo>=</mo><mfrac><mrow><mn>1</mn><mo>−</mo><mn>2</mn><mi>ϕ</mi><mi>θ</mi><mo>+</mo><msup><mi>θ</mi><mn>2</mn></msup></mrow><mrow><mn>1</mn><mo>−</mo><msup><mi>ϕ</mi><mn>2</mn></msup></mrow></mfrac><msubsup><mi>σ</mi><mi>e</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\gamma_0=\frac{1-2\phi\theta+\theta^2}{1-\phi^2}\sigma^2_e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.371548em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathdefault">ϕ</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">e</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>进一步通过递推关系式，得到:</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mi>k</mi></msub><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>θ</mi><mi>ϕ</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>ϕ</mi><mo>−</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><mrow><mn>1</mn><mo>−</mo><mn>2</mn><mi>ϕ</mi><mi>θ</mi><mo>+</mo><msup><mi>θ</mi><mn>2</mn></msup></mrow></mfrac><msup><mi>ϕ</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup><mi mathvariant="normal">，</mi><mi>k</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\rho_k=\frac{(1-\theta\phi)(\phi-\theta)}{1-2\phi\theta+\theta^2}\phi^{k-1}，k&gt;1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.30744em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span><span class="mord mathdefault">ϕ</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mord mathdefault">ϕ</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p><p>  值得注意的是，随着之后长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>的增加，该模型的相关函数指数递减。相关函数的初始值<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\rho_0=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，从<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\rho_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的递推式中可以看到，它的形状依赖于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\rho_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span>的符号。</p><h3 id="arma11模型自相关函数的r语言函数"><a class="markdownIt-Anchor" href="#arma11模型自相关函数的r语言函数"></a> ARMA(1,1)模型自相关函数的R语言函数</h3><p>  按照前述中的递推式可构造求解ARMA(1,1)模型自相关函数并画出其自相关图像的函数 <code>ARMA1.1 &lt;- function(phi=phi, theta=theta, max.lag=20, pic=T, ylim=NULL)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ARMA1.1 &lt;- <span class="keyword">function</span>(phi=phi, theta=theta, max.lag=<span class="number">20</span>, pic=<span class="built_in">T</span>, ylim=<span class="literal">NULL</span>)&#123;</span><br><span class="line">  rho = <span class="literal">NULL</span></span><br><span class="line">  rho[<span class="number">1</span>] &lt;- <span class="number">1</span></span><br><span class="line">  <span class="keyword">for</span> (k <span class="keyword">in</span> <span class="number">1</span>:max.lag) &#123;</span><br><span class="line">    rho[k+<span class="number">1</span>] &lt;- (<span class="number">1</span>-theta*phi)*(phi-theta)/(<span class="number">1</span>-<span class="number">2</span>*theta*phi+theta^<span class="number">2</span>)*phi^(k-<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(pic == <span class="built_in">T</span>)&#123;</span><br><span class="line">    plot(x = <span class="number">1</span>:max.lag, y = rho[-<span class="number">1</span>], type = <span class="string">&quot;h&quot;</span>, </span><br><span class="line">         xlab = <span class="string">&quot;Lag&quot;</span>, ylab = <span class="string">&quot;ACF&quot;</span>, ylim = ylim)</span><br><span class="line">    abline(h=<span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;- <span class="built_in">list</span>(phi = phi, theta = theta, rho = rho)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  该函数包含五个参数:</p><ol><li><p>phi  ARMA(1,1)模型中自回归部分的系数，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ϕ</span></span></span></span>.</p></li><li><p>theta  ARMA(1,1)模型中滑动平均部分的系数，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>.</p></li><li><p>max.lag  ARMA(1,1)模型中需要求解的最大滞后长度k，默认为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>20</mn></mrow><annotation encoding="application/x-tex">k=20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span></span></span></span>.</p></li><li><p>pic  逻辑值，<code>pic=T</code>时绘制自相关函数图像，默认<code>pic=T</code>.</p></li><li><p>ylim  一个二维的向量，作为绘制自相关函数图像的纵坐标范围，默认为<code>ylim=NULL</code></p></li></ol><p>该函数的输出为一个列表，其中phi为输入的phi，theta为输入的theta，rho为计算所得的max.lag+1个自相关函数（第一个为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mn>0</mn></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\rho_0=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>）。</p><h2 id="ar2模型"><a class="markdownIt-Anchor" href="#ar2模型"></a> AR(2)模型</h2><h3 id="ar2模型的自相关函数"><a class="markdownIt-Anchor" href="#ar2模型的自相关函数"></a> AR(2)模型的自相关函数</h3><p>  模型定义的方程是：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><msub><mi>ϕ</mi><mn>1</mn></msub><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ϕ</mi><mn>2</mn></msub><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>+</mo><msub><mi>e</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">Y_t=\phi_1Y_{t-1}+\phi_2Y_{t-2}+e_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>为推导其自相关函数，在其两边乘上<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">Y_{t-k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>，并求期望。假定平稳、零均值，并且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>e</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">e_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>独立于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">Y_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>,得到：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>γ</mi><mi>k</mi></msub><mo>=</mo><msub><mi>ϕ</mi><mn>1</mn></msub><msub><mi>γ</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ϕ</mi><mn>2</mn></msub><msub><mi>γ</mi><mrow><mi>k</mi><mo>−</mo><mn>2</mn></mrow></msub><mi mathvariant="normal">，</mi><mi>k</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\gamma_k=\phi_1\gamma_{k-1}+\phi_2\gamma_{k-2}，k=1,2,3,\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span></span></span></span></span></p><p>两边再除以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>γ</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\gamma_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mi>k</mi></msub><mo>=</mo><msub><mi>ϕ</mi><mn>1</mn></msub><msub><mi>ρ</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ϕ</mi><mn>2</mn></msub><mi>ρ</mi><mrow><mi>k</mi><mo>−</mo><mn>2</mn></mrow><mi mathvariant="normal">，</mi><mi>k</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\rho_k=\phi_1\rho_{k-1}+\phi_2\rho{k-2}，k=1,2,3,\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">ρ</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span></span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span></span></span></span></span></p><p>称上述方程为<strong>Yule-Walker</strong>方程。</p><p>  下面需求解 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">k=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> 时对应的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span>值。首先令 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，因 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mn>0</mn></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">，</mi><msub><mi>ρ</mi><mrow><mo>−</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>ρ</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">\rho_0=1，\rho_{-1}=\rho_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.852771em;vertical-align:-0.208331em;"></span><span class="mord">1</span><span class="mord cjk_fallback">，</span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，得到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mn>1</mn></msub><mo>=</mo><msub><mi>ϕ</mi><mn>1</mn></msub><mo>+</mo><msub><mi>ϕ</mi><mn>2</mn></msub><msub><mi>ρ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\rho_1=\phi_1+\phi_2\rho_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ，整理得：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mn>1</mn></msub><mo>=</mo><mfrac><msub><mi>ϕ</mi><mn>1</mn></msub><mrow><mn>1</mn><mo>−</mo><msub><mi>ϕ</mi><mn>2</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\rho_1=\frac{\phi_1}{1-\phi_2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.25188em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>再令 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">k=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>，将上式带入Yule-Walker方程中，得出</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mn>2</mn></msub><mo>=</mo><mfrac><mrow><msub><mi>ϕ</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>ϕ</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>+</mo><msubsup><mi>ϕ</mi><mn>1</mn><mn>2</mn></msubsup></mrow><mrow><mn>1</mn><mo>−</mo><msub><mi>ϕ</mi><mn>2</mn></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\rho_2=\frac{\phi_2(1-\phi_2)+\phi_1^2}{1-\phi_2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.371548em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>至此我们可以通过<strong>Yule-Walker</strong>方程求出AR(2)模型的自相关函数。</p><p>  下面在给出计算<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\rho_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的显示表达：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mi>k</mi></msub><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msubsup><mi>G</mi><mn>2</mn><mn>2</mn></msubsup><mo stretchy="false">)</mo><msubsup><mi>G</mi><mn>1</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msubsup><mo>−</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msubsup><mi>G</mi><mn>1</mn><mn>2</mn></msubsup><mo stretchy="false">)</mo><msubsup><mi>G</mi><mn>2</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msubsup></mrow><mrow><mo stretchy="false">(</mo><msub><mi>G</mi><mn>1</mn></msub><mo>−</mo><msub><mi>G</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>G</mi><mn>1</mn></msub><msub><mi>G</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mfrac><mi mathvariant="normal">，</mi><mi>k</mi><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\rho_k=\frac{(1-G^2_2)G^{k+1}_1-(1-G^2_1)G^{k+1}_2}{(G_1-G_2)(1+G_1G_2)}，k\ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.502239em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.566239em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8892389999999999em;"><span style="top:-2.433692em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8892389999999999em;"><span style="top:-2.433692em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.1031310000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.266308em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mn>1</mn><mo>=</mo><mfrac><mrow><mi>ϕ</mi><mo>−</mo><msqrt><mrow><msubsup><mi>ϕ</mi><mn>1</mn><mn>2</mn></msubsup><mo>+</mo><mn>4</mn><msub><mi>ϕ</mi><mn>2</mn></msub></mrow></msqrt></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">G1=\frac{\phi-\sqrt{\phi^2_1+4\phi_2}}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6745999999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3296em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.6060024999999998em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">ϕ</span><span class="mbin mtight">−</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0337107142857143em;"><span class="svg-align" style="top:-3.428571428571429em;"><span class="pstrut" style="height:3.428571428571429em;"></span><span class="mord mtight" style="padding-left:1.19em;"><span class="mord mtight"><span class="mord mathdefault mtight">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8051142857142857em;"><span style="top:-2.188485714285714em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span><span style="top:-2.8448em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.31151428571428574em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight">4</span><span class="mord mtight"><span class="mord mathdefault mtight">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0057107142857147em;"><span class="pstrut" style="height:3.428571428571429em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.5428571428571431em;"><svg width='400em' height='1.5428571428571431em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.42286071428571426em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>、<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mn>2</mn><mo>=</mo><mfrac><mrow><mi>ϕ</mi><mo>+</mo><msqrt><mrow><msubsup><mi>ϕ</mi><mn>1</mn><mn>2</mn></msubsup><mo>+</mo><mn>4</mn><msub><mi>ϕ</mi><mn>2</mn></msub></mrow></msqrt></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">G2=\frac{\phi+\sqrt{\phi^2_1+4\phi_2}}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6745999999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3296em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.6060024999999998em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">ϕ</span><span class="mbin mtight">+</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0337107142857143em;"><span class="svg-align" style="top:-3.428571428571429em;"><span class="pstrut" style="height:3.428571428571429em;"></span><span class="mord mtight" style="padding-left:1.19em;"><span class="mord mtight"><span class="mord mathdefault mtight">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8051142857142857em;"><span style="top:-2.188485714285714em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span><span style="top:-2.8448em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.31151428571428574em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mtight">4</span><span class="mord mtight"><span class="mord mathdefault mtight">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.0057107142857147em;"><span class="pstrut" style="height:3.428571428571429em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.5428571428571431em;"><svg width='400em' height='1.5428571428571431em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.42286071428571426em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p>特别地，当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>ϕ</mi><mn>1</mn><mn>2</mn></msubsup><mo>+</mo><mn>4</mn><msub><mi>ϕ</mi><mn>2</mn></msub><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\phi^2_1+4\phi_2&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0622159999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">4</span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>时，其可表示为：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ρ</mi><mi>k</mi></msub><mo>=</mo><msup><mi>R</mi><mi>k</mi></msup><mfrac><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi mathvariant="normal">Θ</mi><mi>k</mi><mo>+</mo><mi mathvariant="normal">Φ</mi><mo stretchy="false">)</mo></mrow><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi mathvariant="normal">Φ</mi><mo stretchy="false">)</mo></mrow></mfrac><mi mathvariant="normal">，</mi><mi>k</mi><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\rho_k=R^k\frac{sin(\Theta k+\Phi)}{sin(\Phi)}，k\ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">Φ</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">Θ</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">Φ</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p><p>其中，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>=</mo><msqrt><mrow><mo>−</mo><msub><mi>ϕ</mi><mn>2</mn></msub></mrow></msqrt></mrow><annotation encoding="application/x-tex">R=\sqrt{-\phi_2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.20500000000000007em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.835em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.795em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20500000000000007em;"><span></span></span></span></span></span></span></span></span> 为阻尼因子，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>ϕ</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>2</mn><msqrt><mrow><mo>−</mo><msub><mi>ϕ</mi><mn>2</mn></msub></mrow></msqrt><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Theta=arccos(\phi_1/(2\sqrt{-\phi_2}))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.085em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mopen">(</span><span class="mord">2</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.835em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.795em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20500000000000007em;"><span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span> 为频率，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Φ</mi><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>ϕ</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>ϕ</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\Phi=arctan[(1-\phi_2)/(1+\phi_2)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Φ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></p><h3 id="ar2模型自相关函数的r语言函数"><a class="markdownIt-Anchor" href="#ar2模型自相关函数的r语言函数"></a> AR(2)模型自相关函数的R语言函数</h3><p>  按照前述中的递推式可构造求解AR(2)模型自相关函数并画出其自相关图像的函数 <code>AR2 &lt;- function(phi1=phi1, phi2=phi2, max.lag = 20, pic = T, ylim=c(-1,1))</code>，此函数还可求出其特征根为复数时的阻尼因子<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi></mrow><annotation encoding="application/x-tex">\Theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Θ</span></span></span></span>。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">AR2 &lt;- <span class="keyword">function</span>(phi1=phi1, phi2=phi2, max.lag = <span class="number">20</span>, pic = <span class="built_in">T</span>, ylim=<span class="built_in">c</span>(-<span class="number">1</span>,<span class="number">1</span>))&#123;</span><br><span class="line">  rho = <span class="literal">NULL</span>;root=<span class="literal">NULL</span>;</span><br><span class="line">  rho1 &lt;- phi1/(<span class="number">1</span>-phi2)</span><br><span class="line">  rho2 &lt;- (phi2*(<span class="number">1</span>-phi2)+phi1^<span class="number">2</span>)/(<span class="number">1</span>-phi2)</span><br><span class="line">  rho[<span class="number">1</span>] &lt;- rho1</span><br><span class="line">  rho[<span class="number">2</span>] &lt;- rho2</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span> (k <span class="keyword">in</span> <span class="number">3</span>:max.lag) &#123;</span><br><span class="line">    rho[k] &lt;- phi1*rho[k-<span class="number">1</span>]+phi2*rho[k-<span class="number">2</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(pic == <span class="built_in">T</span>)&#123;</span><br><span class="line">    plot(x = <span class="number">1</span>:max.lag, y = rho, type = <span class="string">&quot;h&quot;</span>, </span><br><span class="line">         xlab = <span class="string">&quot;Lag&quot;</span>, ylab = <span class="string">&quot;ACF&quot;</span>, ylim = ylim)</span><br><span class="line">    abline(h=<span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(phi1^<span class="number">2</span>+<span class="number">4</span>*phi2 &lt; <span class="number">0</span>)&#123;</span><br><span class="line">    root1 &lt;- (phi1+<span class="built_in">sqrt</span>(<span class="built_in">as.complex</span>(phi1^<span class="number">2</span>+<span class="number">4</span>*phi2)))/(-<span class="number">2</span>*phi2)</span><br><span class="line">    root2 &lt;- (phi1-<span class="built_in">sqrt</span>(<span class="built_in">as.complex</span>(phi1^<span class="number">2</span>+<span class="number">4</span>*phi2)))/(-<span class="number">2</span>*phi2)</span><br><span class="line">    R &lt;- <span class="built_in">sqrt</span>(-phi2)</span><br><span class="line">    Theta &lt;- <span class="built_in">acos</span>(phi1/<span class="number">2</span>*<span class="built_in">sqrt</span>(-phi2))</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    root1 &lt;- (phi1+<span class="built_in">sqrt</span>(phi1^<span class="number">2</span>+<span class="number">4</span>*phi2))/(-<span class="number">2</span>*phi2)</span><br><span class="line">    root2 &lt;- (phi1-<span class="built_in">sqrt</span>(phi1^<span class="number">2</span>+<span class="number">4</span>*phi2))/(-<span class="number">2</span>*phi2)</span><br><span class="line">    R &lt;- <span class="literal">NULL</span></span><br><span class="line">    Theta &lt;-<span class="literal">NULL</span></span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;- <span class="built_in">list</span>(phi=<span class="built_in">c</span>(phi1,phi2), rho = rho, root = <span class="built_in">c</span>(root1, root2), </span><br><span class="line">              R = R, Theta = Theta)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  该函数包含五个参数:</p><ol><li><p>phi1,phi2  AR(2)模型中的两个参数，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ϕ</mi><mn>1</mn></msub><mi mathvariant="normal">，</mi><msub><mi>ϕ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\phi_1，\phi_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</p></li><li><p>max.lag  AR(2)模型中需要求解的最大滞后长度k，默认为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>20</mn></mrow><annotation encoding="application/x-tex">k=20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span></span></span></span>.</p></li><li><p>pic  逻辑值，<code>pic=T</code>时绘制自相关函数图像，默认<code>pic=T</code>.</p></li><li><p>ylim  一个二维的向量，作为绘制自相关函数图像的纵坐标范围，默认为<code>ylim=c(-1,1)</code></p></li></ol><p>该函数的输出为一个列表，其中phi为输入的phi为输入的两个参数，rho为计算所得的max.lag个自相关函数，root为特征方程的两个根，R为阻尼系数，Theta为频率。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;  学习《时间序列分析及应用·Jonathan D.Cryer &amp;amp; Kung-Sik Chan 著》一书时的相关笔记——本文介绍了ARMA(1,1)模型和AR(2)模型的自相关函数的R语言实现。&lt;/p&gt;</summary>
    
    
    
    <category term="时序分析" scheme="https://www.hermitlsr.top/categories/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/"/>
    
    <category term="学习笔记" scheme="https://www.hermitlsr.top/categories/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="R" scheme="https://www.hermitlsr.top/tags/R/"/>
    
    <category term="时序分析" scheme="https://www.hermitlsr.top/tags/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/"/>
    
    <category term="ARMA" scheme="https://www.hermitlsr.top/tags/ARMA/"/>
    
  </entry>
  
  <entry>
    <title>R语言的久远学习笔记--图形功能</title>
    <link href="https://www.hermitlsr.top/2021-06-23/4a9bb1b.html"/>
    <id>https://www.hermitlsr.top/2021-06-23/4a9bb1b.html</id>
    <published>2021-06-23T03:58:21.000Z</published>
    <updated>2021-07-13T04:49:06.722Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这是曾经R语言软件课程的简单笔记的概率函数部分，整理至此。可以先查看两组两组例子，感受一下： <code>demo(graphics)</code>、<code>demo(persp)</code></p><span id="more"></span><h2 id="高级绘图函数"><a class="markdownIt-Anchor" href="#高级绘图函数"></a> 高级绘图函数</h2><h3 id="向日葵花型图"><a class="markdownIt-Anchor" href="#向日葵花型图"></a> 向日葵花型图</h3><p><code>sunflowerplot</code></p><p>以相似坐标的点作为花朵，其花瓣数目为点的个数</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## my understand</span></span><br><span class="line">x &lt;- <span class="built_in">rep</span>(<span class="number">2</span>, <span class="number">10</span>);y &lt;- <span class="built_in">rep</span>(<span class="number">2</span>, <span class="number">10</span>)</span><br><span class="line">sunflowerplot(x, y)</span><br><span class="line"></span><br><span class="line">x &lt;- <span class="built_in">rep</span>(<span class="number">2</span>, <span class="number">10</span>);y &lt;- <span class="built_in">rep</span>(<span class="number">3</span>, <span class="number">10</span>)</span><br><span class="line">sunflowerplot(x, y)</span><br><span class="line"></span><br><span class="line">x &lt;- <span class="built_in">rep</span>(<span class="number">1</span>:<span class="number">5</span>, <span class="number">5</span>); y &lt;- <span class="built_in">rep</span>(<span class="number">3</span>, <span class="number">25</span>)</span><br><span class="line">sunflowerplot(x, y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 实例</span></span><br><span class="line">require(stats) <span class="comment"># for rnorm</span></span><br><span class="line">require(grDevices)</span><br><span class="line"></span><br><span class="line"><span class="comment">## &#x27;number&#x27; is computed automatically:</span></span><br><span class="line">sunflowerplot(iris[, <span class="number">3</span>:<span class="number">4</span>])</span><br><span class="line"><span class="comment">## Imitating Chambers et al, p.109, closely:</span></span><br><span class="line">sunflowerplot(iris[, <span class="number">3</span>:<span class="number">4</span>], cex = <span class="number">.2</span>, cex.fact = <span class="number">1</span>, size = <span class="number">.035</span>, seg.lwd = <span class="number">.8</span>)</span><br><span class="line"><span class="comment">## or</span></span><br><span class="line">sunflowerplot(Petal.Width ~ Petal.Length, data = iris,</span><br><span class="line">              cex = <span class="number">.2</span>, cex.fact = <span class="number">1</span>, size = <span class="number">.035</span>, seg.lwd = <span class="number">.8</span>)</span><br><span class="line"></span><br><span class="line">sunflowerplot(x = sort(<span class="number">2</span>*<span class="built_in">round</span>(rnorm(<span class="number">100</span>))), y = <span class="built_in">round</span>(rnorm(<span class="number">100</span>), <span class="number">0</span>),</span><br><span class="line">              main = <span class="string">&quot;Sunflower Plot of Rounded N(0,1)&quot;</span>)</span><br><span class="line"><span class="comment">## Similarly using a &quot;xyTable&quot; argument:</span></span><br><span class="line">xyT &lt;- xyTable(x = sort(<span class="number">2</span>*<span class="built_in">round</span>(rnorm(<span class="number">100</span>))), y = <span class="built_in">round</span>(rnorm(<span class="number">100</span>), <span class="number">0</span>),</span><br><span class="line">               digits = <span class="number">3</span>)</span><br><span class="line">utils::str(xyT, vec.len = <span class="number">20</span>)</span><br><span class="line">sunflowerplot(xyT, main = <span class="string">&quot;2nd Sunflower Plot of Rounded N(0,1)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## A &#x27;marked point process&#x27; &#123;explicit &#x27;number&#x27; argument&#125;:</span></span><br><span class="line">sunflowerplot(rnorm(<span class="number">100</span>), rnorm(<span class="number">100</span>), number = rpois(n = <span class="number">100</span>, lambda = <span class="number">2</span>),</span><br><span class="line">              main = <span class="string">&quot;Sunflower plot (marked point process)&quot;</span>,</span><br><span class="line">              rotate = <span class="literal">TRUE</span>, col = <span class="string">&quot;blue4&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="饼图-箱图"><a class="markdownIt-Anchor" href="#饼图-箱图"></a> 饼图、箱图</h3><p>饼图不宜多用，一般用于比较各部分的占比情况</p><p>箱图常用于同一类数据的比较，可以看到数据分布和数据量，有横向和纵向两种。</p><p>对于图像的颜色填充可使用<code>rainbow()</code>设定</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">require(grDevices)</span><br><span class="line">pie(<span class="built_in">rep</span>(<span class="number">1</span>, <span class="number">24</span>), col = rainbow(<span class="number">24</span>), radius = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">pie.sales &lt;- <span class="built_in">c</span>(<span class="number">0.12</span>, <span class="number">0.3</span>, <span class="number">0.26</span>, <span class="number">0.16</span>, <span class="number">0.04</span>, <span class="number">0.12</span>)</span><br><span class="line"><span class="built_in">names</span>(pie.sales)&lt;-<span class="built_in">c</span>(<span class="string">&quot;Blueberry&quot;</span>,<span class="string">&quot;Cherry&quot;</span>,<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Boston Cream&quot;</span>, <span class="string">&quot;Other&quot;</span>, <span class="string">&quot;Vanilla Cream&quot;</span>)</span><br><span class="line">pie(pie.sales) <span class="comment"># default colours</span></span><br><span class="line"></span><br><span class="line">pie(pie.sales, density = <span class="number">10</span>, angle = <span class="number">15</span> + <span class="number">10</span> * <span class="number">1</span>:<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">pie(pie.sales, clockwise = <span class="literal">TRUE</span>, main = <span class="string">&quot;pie(*, clockwise = TRUE)&quot;</span>)</span><br><span class="line"></span><br><span class="line">segments(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, col = <span class="string">&quot;red&quot;</span>, lwd = <span class="number">2</span>)</span><br><span class="line">text(<span class="number">0</span>, <span class="number">1</span>, <span class="string">&quot;init.angle = 90&quot;</span>, col = <span class="string">&quot;red&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 另一个例子</span></span><br><span class="line"></span><br><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line">slices &lt;- <span class="built_in">c</span>(<span class="number">10</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">16</span>,<span class="number">8</span>)  <span class="comment"># 数据</span></span><br><span class="line">lbls &lt;- <span class="built_in">c</span>(<span class="string">&quot;US&quot;</span>,<span class="string">&quot;UK&quot;</span>,<span class="string">&quot;Australis&quot;</span>,<span class="string">&quot;Germany&quot;</span>,<span class="string">&quot;France&quot;</span>)  <span class="comment"># 标签数据</span></span><br><span class="line">pie(slices,lbls)  <span class="comment"># 基本饼图</span></span><br><span class="line"></span><br><span class="line">pct &lt;- <span class="built_in">round</span>(slices/<span class="built_in">sum</span>(slices)*<span class="number">100</span>)  <span class="comment"># 数据比例</span></span><br><span class="line">lbls2 &lt;- paste(lbls,<span class="string">&quot; &quot;</span>,pct ,<span class="string">&quot;%&quot;</span>,sep = <span class="string">&quot;&quot;</span>)</span><br><span class="line">pie(slices,labels = lbls2,col = rainbow(<span class="built_in">length</span>(lbls2)),  <span class="comment"># rainbow是一个彩虹色调色板</span></span><br><span class="line">    main = <span class="string">&quot;Pie Chart with Percentages&quot;</span>)</span><br><span class="line"></span><br><span class="line">library(plotrix)</span><br><span class="line">pie3D(slices,labels=lbls,explode=<span class="number">0.1</span>,main=<span class="string">&quot;3D pie chart&quot;</span>)  <span class="comment"># 三维饼图</span></span><br><span class="line"></span><br><span class="line">mytable &lt;- table (state.region)</span><br><span class="line">lbls3 &lt;- paste(<span class="built_in">names</span>(mytable),<span class="string">&quot;\n&quot;</span>,mytable,sep = <span class="string">&quot;&quot;</span>)</span><br><span class="line">pie(mytable,labels = lbls3,</span><br><span class="line">    main = <span class="string">&quot;pie  chart from a table \n (with sample sizes&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">boxplot(mtcars$mpg,main=<span class="string">&quot;Box plot&quot;</span>,</span><br><span class="line">        ylab =<span class="string">&quot;Miles per Gallon&quot;</span>)  <span class="comment"># 标准箱线图</span></span><br><span class="line"></span><br><span class="line">boxplot(mpg ~ cyl,data= mtcars,</span><br><span class="line">       main=<span class="string">&quot;car milesge data&quot;</span>,</span><br><span class="line">       xlab= <span class="string">&quot;Number of cylinders&quot;</span>,</span><br><span class="line">       ylab= <span class="string">&quot;Miles per Gallon&quot;</span>)</span><br><span class="line"></span><br><span class="line">boxplot(mpg ~ cyl,data= mtcars,</span><br><span class="line">        notch=<span class="literal">TRUE</span>,  <span class="comment"># 含有凹槽的箱线图</span></span><br><span class="line">        varwidth = <span class="literal">TRUE</span>,  <span class="comment"># 宽度和样本大小成正比</span></span><br><span class="line">        col= <span class="string">&quot;red&quot;</span>,</span><br><span class="line">        main=<span class="string">&quot;car milesge data&quot;</span>,</span><br><span class="line">        xlab= <span class="string">&quot;Number of cylinders&quot;</span>,</span><br><span class="line">        ylab= <span class="string">&quot;Miles per Gallon&quot;</span>)</span><br><span class="line"></span><br><span class="line">mtcars$cyl.f&lt;- factor(mtcars$cyl,  <span class="comment"># 转换成因子结构</span></span><br><span class="line">                      levels= <span class="built_in">c</span>(<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>),</span><br><span class="line">                      labels = <span class="built_in">c</span>(<span class="string">&quot;4&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;8&quot;</span>))</span><br><span class="line">mtcars$am.f &lt;- factor(mtcars$am,levels = <span class="built_in">c</span>(<span class="number">0</span>,<span class="number">1</span>),</span><br><span class="line">                      labels = <span class="built_in">c</span>(<span class="string">&quot;auto&quot;</span>,<span class="string">&quot;standard&quot;</span>))</span><br><span class="line">boxplot(mpg~ am.f*cyl.f,  <span class="comment"># 分组的箱线图</span></span><br><span class="line">        data = mtcars,</span><br><span class="line">        varwidth=<span class="literal">TRUE</span>,</span><br><span class="line">        col= <span class="built_in">c</span>(<span class="string">&quot;gold&quot;</span>,<span class="string">&quot;darkgreen&quot;</span>),</span><br><span class="line">        main= <span class="string">&quot;MPG Distribution by Auto Type&quot;</span>,</span><br><span class="line">        xlab=<span class="string">&quot;Auto Type&quot;</span>,</span><br><span class="line">        ylxb=<span class="string">&quot;Miles per Gallon&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">boxplot(len ~ dose, data = ToothGrowth,</span><br><span class="line">                boxwex = <span class="number">0.25</span>, at = <span class="number">1</span>:<span class="number">3</span> - <span class="number">0.2</span>,</span><br><span class="line">                subset = supp == <span class="string">&quot;VC&quot;</span>, col = <span class="string">&quot;yellow&quot;</span>,</span><br><span class="line">                main = <span class="string">&quot;Guinea Pigs&#x27; Tooth Growth&quot;</span>,</span><br><span class="line">                xlab = <span class="string">&quot;Vitamin C dose mg&quot;</span>,</span><br><span class="line">                ylab = <span class="string">&quot;tooth length&quot;</span>,</span><br><span class="line">                xlim = <span class="built_in">c</span>(<span class="number">0.5</span>, <span class="number">3.5</span>), ylim = <span class="built_in">c</span>(<span class="number">0</span>, <span class="number">35</span>),</span><br><span class="line">                yaxs = <span class="string">&quot;i&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">boxplot(len ~ dose, data = ToothGrowth, add = <span class="literal">TRUE</span>,</span><br><span class="line">        boxwex = <span class="number">0.25</span>, at = <span class="number">1</span>:<span class="number">3</span> + <span class="number">0.2</span>,</span><br><span class="line">        subset = supp == <span class="string">&quot;OJ&quot;</span>, col = <span class="string">&quot;orange&quot;</span>)</span><br><span class="line">legend(<span class="number">2</span>, <span class="number">9</span>, <span class="built_in">c</span>(<span class="string">&quot;Ascorbic acid&quot;</span>, <span class="string">&quot;Orange juice&quot;</span>),</span><br><span class="line">       fill = <span class="built_in">c</span>(<span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;orange&quot;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">boxplot(len ~ dose:supp, data = ToothGrowth,</span><br><span class="line">        boxwex = <span class="number">0.5</span>, col = <span class="built_in">c</span>(<span class="string">&quot;orange&quot;</span>, <span class="string">&quot;yellow&quot;</span>),</span><br><span class="line">        main = <span class="string">&quot;Guinea Pigs&#x27; Tooth Growth&quot;</span>,</span><br><span class="line">        xlab = <span class="string">&quot;Vitamin C dose mg&quot;</span>, ylab = <span class="string">&quot;tooth length&quot;</span>,</span><br><span class="line">        sep = <span class="string">&quot;:&quot;</span>, lex.order = <span class="literal">TRUE</span>, </span><br><span class="line">        ylim = <span class="built_in">c</span>(<span class="number">0</span>, <span class="number">35</span>), yaxs = <span class="string">&quot;i&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="stripchart-将x画在一条直线上"><a class="markdownIt-Anchor" href="#stripchart-将x画在一条直线上"></a> <code>stripchart()</code> 将x画在一条直线上</h3><p>对于数据量较小时可以作为箱型图的替代</p><p><code>stripchart(x, data = NULL, dlab = NULL, ...,subset, na.action = NULL)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- stats::rnorm(<span class="number">50</span>)</span><br><span class="line">xr &lt;- <span class="built_in">round</span>(x, <span class="number">1</span>)</span><br><span class="line">stripchart(x) ; m &lt;- mean(par(<span class="string">&quot;usr&quot;</span>)[<span class="number">1</span>:<span class="number">2</span>])</span><br><span class="line">text(m, <span class="number">1.04</span>, <span class="string">&quot;stripchart(x, \&quot;overplot\&quot;)&quot;</span>)</span><br><span class="line">stripchart(xr, method = <span class="string">&quot;stack&quot;</span>, add = <span class="literal">TRUE</span>, at = <span class="number">1.2</span>)</span><br><span class="line">text(m, <span class="number">1.35</span>, <span class="string">&quot;stripchart(round(x,1), \&quot;stack\&quot;)&quot;</span>)</span><br><span class="line">stripchart(xr, method = <span class="string">&quot;jitter&quot;</span>, add = <span class="literal">TRUE</span>, at = <span class="number">0.7</span>)</span><br><span class="line">text(m, <span class="number">0.85</span>, <span class="string">&quot;stripchart(round(x,1), \&quot;jitter\&quot;)&quot;</span>)</span><br><span class="line"></span><br><span class="line">stripchart(decrease ~ treatment,</span><br><span class="line">    main = <span class="string">&quot;stripchart(OrchardSprays)&quot;</span>,</span><br><span class="line">    vertical = <span class="literal">TRUE</span>, <span class="built_in">log</span> = <span class="string">&quot;y&quot;</span>, data = OrchardSprays)</span><br><span class="line"></span><br><span class="line">stripchart(decrease ~ treatment, at = <span class="built_in">c</span>(<span class="number">1</span>:<span class="number">8</span>)^<span class="number">2</span>,</span><br><span class="line">    main = <span class="string">&quot;stripchart(OrchardSprays)&quot;</span>,</span><br><span class="line">    vertical = <span class="literal">TRUE</span>, <span class="built_in">log</span> = <span class="string">&quot;y&quot;</span>, data = OrchardSprays)</span><br></pre></td></tr></table></figure><h3 id="coplotx~yz给定z绘制xy的散点图"><a class="markdownIt-Anchor" href="#coplotx~yz给定z绘制xy的散点图"></a> <code>coplot(x~y|z)</code>给定z绘制(x,y)的散点图</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Tonga Trench Earthquakes</span></span><br><span class="line">coplot(lat ~ long | depth, data = quakes)</span><br><span class="line">given.depth &lt;- co.intervals(quakes$depth, number = <span class="number">4</span>, overlap = <span class="number">.1</span>)</span><br><span class="line">coplot(lat ~ long | depth, data = quakes, given.v = given.depth, rows = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Conditioning on 2 variables:</span></span><br><span class="line">ll.dm &lt;- lat ~ long | depth * mag</span><br><span class="line">coplot(ll.dm, data = quakes)</span><br><span class="line">coplot(ll.dm, data = quakes, number = <span class="built_in">c</span>(<span class="number">4</span>, <span class="number">7</span>), show.given = <span class="built_in">c</span>(<span class="literal">TRUE</span>, <span class="literal">FALSE</span>))</span><br><span class="line">coplot(ll.dm, data = quakes, number = <span class="built_in">c</span>(<span class="number">3</span>, <span class="number">7</span>),</span><br><span class="line">       overlap = <span class="built_in">c</span>(-<span class="number">.5</span>, <span class="number">.1</span>)) <span class="comment"># negative overlap DROPS values</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## given two factors</span></span><br><span class="line">Index &lt;- seq(<span class="built_in">length</span> = nrow(warpbreaks)) <span class="comment"># to get nicer default labels</span></span><br><span class="line">coplot(breaks ~ Index | wool * tension, data = warpbreaks,</span><br><span class="line">       show.given = <span class="number">0</span>:<span class="number">1</span>)</span><br><span class="line">coplot(breaks ~ Index | wool * tension, data = warpbreaks,</span><br><span class="line">       col = <span class="string">&quot;red&quot;</span>, bg = <span class="string">&quot;pink&quot;</span>, pch = <span class="number">21</span>,</span><br><span class="line">       bar.bg = <span class="built_in">c</span>(fac = <span class="string">&quot;light blue&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## Example with empty panels:</span></span><br><span class="line"></span><br><span class="line">win.graph()</span><br><span class="line">with(data.frame(state.x77), &#123;</span><br><span class="line">coplot(Life.Exp ~ Income | Illiteracy * state.region, number = <span class="number">3</span>,</span><br><span class="line">       panel = <span class="keyword">function</span>(x, y, ...) panel.smooth(x, y, span = <span class="number">.8</span>, ...))</span><br><span class="line"><span class="comment">## y ~ factor -- not really sensible, but &#x27;show off&#x27;:</span></span><br><span class="line">coplot(Life.Exp ~ state.region | Income * state.division,</span><br><span class="line">       panel = panel.smooth)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="interactionplotf1-f2-y-funmean"><a class="markdownIt-Anchor" href="#interactionplotf1-f2-y-funmean"></a> <code>interaction.plot(f1, f2, y, fun=mean)</code></h3><p>以f1(因子)为横坐标，fun(y|f2)为纵坐标绘制相应的f2(因子)的图像</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">require(graphics)</span><br><span class="line"></span><br><span class="line">with(ToothGrowth, &#123;</span><br><span class="line">interaction.plot(dose, supp, len, fixed = <span class="literal">TRUE</span>)</span><br><span class="line">dose &lt;- ordered(dose)</span><br><span class="line">interaction.plot(dose, supp, len, fixed = <span class="literal">TRUE</span>, col = <span class="number">2</span>:<span class="number">3</span>, leg.bty = <span class="string">&quot;o&quot;</span>)</span><br><span class="line">interaction.plot(dose, supp, len, fixed = <span class="literal">TRUE</span>, col = <span class="number">2</span>:<span class="number">3</span>, type = <span class="string">&quot;p&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">with(OrchardSprays, &#123;</span><br><span class="line">  interaction.plot(treatment, rowpos, decrease)</span><br><span class="line">  interaction.plot(rowpos, treatment, decrease, cex.axis = <span class="number">0.8</span>)</span><br><span class="line">  <span class="comment">## order the rows by their mean effect</span></span><br><span class="line">  rowpos &lt;- factor(rowpos,</span><br><span class="line">                   levels = sort.list(tapply(decrease, rowpos, mean)))</span><br><span class="line">  interaction.plot(rowpos, treatment, decrease, col = <span class="number">2</span>:<span class="number">9</span>, lty = <span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="matplot"><a class="markdownIt-Anchor" href="#matplot"></a> <code>matplot()</code></h3><p>二元图，x的第一列对应y的第一列，以此类推绘制图像</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- matrix(<span class="built_in">rep</span>(<span class="number">1</span>:<span class="number">10</span>, <span class="number">5</span>), ncol = <span class="number">5</span>)</span><br><span class="line">y &lt;- matrix(seq(<span class="number">50</span>), ncol = <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">matplot(x, y, type = <span class="string">&quot;l&quot;</span>, lty = <span class="number">1</span>:<span class="number">5</span>, col=rainbow(<span class="number">30</span>), lwd = <span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="dotcharx"><a class="markdownIt-Anchor" href="#dotcharx"></a> <code>dotchar(x)</code></h3><p>x为数据框，点图(逐行逐列累加图)</p><p><code>dotchart(x, labels = NULL, groups = NULL, gdata = NULL,cex = par(&quot;cex&quot;), pt.cex = cex,pch = 21, gpch = 21, bg = par(&quot;bg&quot;),color = par(&quot;fg&quot;), gcolor = par(&quot;fg&quot;),lcolor = &quot;gray&quot;,xlim = range(x[is.finite(x)]), main = NULL, xlab = NULL, ylab = NULL, ...)</code></p><p>具体可参见：</p><p><a href="https://blog.csdn.net/moxigandashu/article/details/53383041">https://blog.csdn.net/moxigandashu/article/details/53383041</a></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 例1</span></span><br><span class="line">dotchart(VADeaths, main = <span class="string">&quot;Death Rates in Virginia - 1940&quot;</span>)</span><br><span class="line">op &lt;- par(xaxs = <span class="string">&quot;i&quot;</span>)  <span class="comment"># 0 -- 100%</span></span><br><span class="line">dotchart(t(VADeaths), xlim = <span class="built_in">c</span>(<span class="number">0</span>,<span class="number">100</span>),</span><br><span class="line">         main = <span class="string">&quot;Death Rates in Virginia - 1940&quot;</span>)</span><br><span class="line">par(op)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 例2 </span></span><br><span class="line">dotchart(mtcars$mpg,labels = row.names(mtcars),cex= <span class="number">.7</span>,</span><br><span class="line">         main = <span class="string">&quot;Gas Mileage for Car Models&quot;</span>,</span><br><span class="line">         xlab = <span class="string">&quot;Miles Per gallon&quot;</span>)</span><br><span class="line"></span><br><span class="line">x &lt;- mtcars[order(mtcars$mpg),]        <span class="comment">#按照mpg排序</span></span><br><span class="line">x$cyl &lt;-factor(x$cyl)      <span class="comment">#将cyl变成因子数据结构类型</span></span><br><span class="line">x$color[x$cyl==<span class="number">4</span>] &lt;-<span class="string">&quot;red&quot;</span>   <span class="comment">#新建一个color变量，油缸数cyl不同，颜色不同</span></span><br><span class="line">x$color[x$cyl==<span class="number">6</span>] &lt;-<span class="string">&quot;blue&quot;</span></span><br><span class="line">x$color[x$cyl==<span class="number">8</span>] &lt;-<span class="string">&quot;darkgreen&quot;</span></span><br><span class="line">dotchart(x$mpg,        <span class="comment">#数据对象</span></span><br><span class="line">         labels = row.names(x),     <span class="comment">#标签</span></span><br><span class="line">         cex = <span class="number">.7</span>,<span class="comment">#字体大小</span></span><br><span class="line">         groups = x$cyl,      <span class="comment">#按照cyl分组</span></span><br><span class="line">         gcolor = <span class="string">&quot;black&quot;</span>,    <span class="comment">#分组颜色</span></span><br><span class="line">         color = x$color,     <span class="comment">#数据点颜色</span></span><br><span class="line">         pch = <span class="number">19</span>,<span class="comment">#点类型</span></span><br><span class="line">         main = <span class="string">&quot;Gas Mileage for car modes \n grouped by cylinder&quot;</span>,    <span class="comment">#标题</span></span><br><span class="line">         xlab = <span class="string">&quot;miles per gallon&quot;</span>)     <span class="comment">#x轴标签</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="pairsx"><a class="markdownIt-Anchor" href="#pairsx"></a> <code>pairs(x)</code></h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 基础用法</span></span><br><span class="line">pairs(iris[<span class="number">1</span>:<span class="number">4</span>], main = <span class="string">&quot;Anderson&#x27;s Iris Data -- 3 species&quot;</span>,</span><br><span class="line">      pch = <span class="number">21</span>, bg = <span class="built_in">c</span>(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green3&quot;</span>, <span class="string">&quot;blue&quot;</span>)[<span class="built_in">unclass</span>(iris$Species)])</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="直方图"><a class="markdownIt-Anchor" href="#直方图"></a> 直方图</h3><p><code>hist(x, ...)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">par (mfrow = <span class="built_in">c</span>(<span class="number">2</span>,<span class="number">2</span>))  <span class="comment"># 设置四幅图片一起显示</span></span><br><span class="line">hist(mtcars$mpg)  <span class="comment"># 基本直方图</span></span><br><span class="line"></span><br><span class="line">hist(mtcars$mpg,</span><br><span class="line">     breaks = <span class="number">12</span>,  <span class="comment"># 指定组数</span></span><br><span class="line">     col= <span class="string">&quot;red&quot;</span>,  <span class="comment"># 指定颜色</span></span><br><span class="line">     xlab = <span class="string">&quot;Miles per Gallon&quot;</span>,</span><br><span class="line">     main = <span class="string">&quot;colored histogram with 12 bins&quot;</span>)</span><br><span class="line"></span><br><span class="line">hist(mtcars$mpg,</span><br><span class="line">     freq = <span class="literal">FALSE</span>,  <span class="comment"># 表示不按照频数绘图</span></span><br><span class="line">     breaks = <span class="number">12</span>,</span><br><span class="line">     col = <span class="string">&quot;red&quot;</span>,</span><br><span class="line">     xlab = <span class="string">&quot;Miles per Gallon&quot;</span>,</span><br><span class="line">     main = <span class="string">&quot;Histogram,rug plot,density curve&quot;</span>)</span><br><span class="line">rug(jitter(mtcars$mpg))  <span class="comment"># 添加轴须图</span></span><br><span class="line">lines(density(mtcars$mpg),col= <span class="string">&quot;blue&quot;</span>,lwd=<span class="number">2</span>)  <span class="comment">#添加密度曲线</span></span><br><span class="line"></span><br><span class="line">x &lt;-mtcars$mpg</span><br><span class="line">h &lt;-hist(x,breaks = <span class="number">12</span>,</span><br><span class="line">         col = <span class="string">&quot;red&quot;</span>,</span><br><span class="line">         xlab = <span class="string">&quot;Miles per Gallon&quot;</span>,</span><br><span class="line">         main = <span class="string">&quot;Histogram with normal and box&quot;</span>)</span><br><span class="line">xfit &lt;- seq(<span class="built_in">min</span>(x),<span class="built_in">max</span>(x),<span class="built_in">length</span>=<span class="number">40</span>)</span><br><span class="line">yfit &lt;-dnorm(xfit,mean = mean(x),sd=sd(x))</span><br><span class="line">yfit &lt;- yfit *diff(h$mids[<span class="number">1</span>:<span class="number">2</span>])*<span class="built_in">length</span>(x)</span><br><span class="line">lines(xfit,yfit,col=<span class="string">&quot;blue&quot;</span>,lwd=<span class="number">2</span>)  <span class="comment"># 添加正态分布密度曲线</span></span><br><span class="line">box()  <span class="comment"># 添加方框</span></span><br></pre></td></tr></table></figure><h3 id="条形图"><a class="markdownIt-Anchor" href="#条形图"></a> 条形图</h3><p><code>barplot()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">library(vcd)</span><br><span class="line">counts &lt;- table(Arthritis$Improved)   </span><br><span class="line"><span class="comment">## 引入vcd包只是想要Arthritis中的数据</span></span><br><span class="line">barplot(counts,main = <span class="string">&quot;bar plot&quot;</span>,xlab = <span class="string">&quot;improved&quot;</span>,ylab = <span class="string">&quot;counts&quot;</span>)</span><br><span class="line"></span><br><span class="line">barplot(counts,main = <span class="string">&quot; horizontal bar plot&quot;</span>,</span><br><span class="line">        xlab = <span class="string">&quot;frequency&quot;</span>,</span><br><span class="line">        ylab = <span class="string">&quot;improved&quot;</span>,</span><br><span class="line">        horiz = <span class="literal">TRUE</span>)  </span><br><span class="line"><span class="comment">## horizon值默认是FALSE，为TRUE的时候表示图形变为水平的</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="星图-stars"><a class="markdownIt-Anchor" href="#星图-stars"></a> 星图 <code>stars()</code></h3><p><code>stars(x,full=TRUE,scale=TRUE,key.loc=NULL,draw.segments=FALSE,…)</code></p><p>参数x是矩阵或者是数据框，按照矩阵的行变量进行绘制。对每个标准量单独标准化之后绘制星图。<code>draw.segments=TRUE</code>制定画出弧形</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(-<span class="number">1.9</span>,-<span class="number">12.7</span>,<span class="number">5.7</span>,<span class="number">6.6</span>,<span class="number">0.3</span>,<span class="number">4.2</span>,<span class="number">15.8</span>,<span class="number">18.5</span>,<span class="number">7.8</span>,<span class="number">10.8</span>,</span><br><span class="line">       -<span class="number">0.9</span>,-<span class="number">8.1</span>,<span class="number">5.6</span>,<span class="number">6.5</span>,<span class="number">3.9</span>,<span class="number">5.81</span>,<span class="number">7.3</span>,<span class="number">20.5</span>,<span class="number">9.0</span>,<span class="number">13.2</span>,</span><br><span class="line">       <span class="number">8.0</span>,<span class="number">0.5</span>,<span class="number">11.1</span>,<span class="number">12.7</span>,<span class="number">11.5</span>,<span class="number">12.8</span>,<span class="number">17.9</span>,<span class="number">21.8</span>,<span class="number">13.3</span>,<span class="number">15.9</span>,</span><br><span class="line">       <span class="number">13.5</span>,<span class="number">8.0</span>,<span class="number">16.6</span>,<span class="number">19.3</span>,<span class="number">17.1</span>,<span class="number">19.0</span>,<span class="number">23.6</span>,<span class="number">26.7</span>,<span class="number">19.2</span>,<span class="number">18.0</span>,</span><br><span class="line">       <span class="number">20.4</span>,<span class="number">18.3</span>,<span class="number">20.8</span>,<span class="number">22.7</span>,<span class="number">21.8</span>,<span class="number">23.9</span>,<span class="number">25.3</span>,<span class="number">28.3</span>,<span class="number">22.9</span>,<span class="number">18.0</span>,</span><br><span class="line">       <span class="number">25.9</span>,<span class="number">21.6</span>,<span class="number">25.6</span>,<span class="number">26.0</span>,<span class="number">27.8</span>,<span class="number">28.4</span>,<span class="number">27.8</span>,<span class="number">29.4</span>,<span class="number">25.4</span>,<span class="number">20.4</span>,</span><br><span class="line">       <span class="number">25.9</span>,<span class="number">24.2</span>,<span class="number">29.4</span>,<span class="number">30.0</span>,<span class="number">27.1</span>,<span class="number">30.2</span>,<span class="number">29.8</span>,<span class="number">30.0</span>,<span class="number">31.0</span>,<span class="number">21.3</span>,</span><br><span class="line">       <span class="number">26.4</span>,<span class="number">24.3</span>,<span class="number">30.2</span>,<span class="number">30.0</span>,<span class="number">26.1</span>,<span class="number">29.7</span>,<span class="number">29.4</span>,<span class="number">28.5</span>,<span class="number">32.4</span>,<span class="number">20.6</span>,</span><br><span class="line">       <span class="number">21.8</span>,<span class="number">17.5</span>,<span class="number">23.9</span>,<span class="number">24.3</span>,<span class="number">21.2</span>,<span class="number">24.0</span>,<span class="number">27.0</span>,<span class="number">27.4</span>,<span class="number">24.8</span>,<span class="number">18.3</span>,</span><br><span class="line">       <span class="number">16.1</span>,<span class="number">11.6</span>,<span class="number">22.1</span>,<span class="number">22.1</span>,<span class="number">19.0</span>,<span class="number">21.0</span>,<span class="number">26.4</span>,<span class="number">27.1</span>,<span class="number">20.6</span>,<span class="number">16.9</span>,</span><br><span class="line">       <span class="number">6.7</span>,<span class="number">0.8</span>,<span class="number">15.7</span>,<span class="number">15.0</span>,<span class="number">10.8</span>,<span class="number">14.0</span>,<span class="number">21.9</span>,<span class="number">25.3</span>,<span class="number">14.6</span>,<span class="number">13.2</span>,</span><br><span class="line">       <span class="number">1.0</span>,<span class="number">6.7</span>,<span class="number">8.2</span>,<span class="number">8.1</span>,<span class="number">3.0</span>,<span class="number">6.8</span>,<span class="number">16.0</span>,<span class="number">20.8</span>,<span class="number">9.4</span>,<span class="number">9.8</span>)</span><br><span class="line">x &lt;- matrix(x, ncol = <span class="number">10</span>, nrow = <span class="number">12</span>, byrow = <span class="built_in">T</span>)</span><br><span class="line">cnames &lt;- <span class="built_in">c</span>(<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;沈阳&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;南昌&quot;</span>,<span class="string">&quot;郑州&quot;</span>,<span class="string">&quot;武汉&quot;</span>,<span class="string">&quot;广州&quot;</span>,<span class="string">&quot;海口&quot;</span>,<span class="string">&quot;重庆&quot;</span>,<span class="string">&quot;昆明&quot;</span>)</span><br><span class="line">rnames &lt;- paste0(<span class="number">1</span>:<span class="number">12</span>,<span class="string">&quot;月&quot;</span>,seq=<span class="string">&quot;&quot;</span>)</span><br><span class="line">colnames(x) &lt;-  cnames</span><br><span class="line">rownames(x) &lt;- rnames</span><br><span class="line"></span><br><span class="line">stars(x)</span><br><span class="line">stars(x,key.loc=<span class="built_in">c</span>(<span class="number">10</span>,<span class="number">2</span>,<span class="number">4</span>),cex=<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">stars(t(x),full=<span class="literal">FALSE</span>,draw.segments=<span class="literal">TRUE</span>,key.loc=<span class="built_in">c</span>(<span class="number">10</span>,<span class="number">3</span>,<span class="number">5</span>),cex=<span class="number">0.8</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="绘图选项"><a class="markdownIt-Anchor" href="#绘图选项"></a> 绘图选项</h2><ol><li><p><code>add=FALSE</code> :若为<code>TRUE</code>则叠加一个图形在前一个图上(注意坐标系的位置和尺度可能不一样)</p></li><li><p><code>axes=TRUE</code> :若为<code>FALSE</code>则不绘制轴和边框</p></li><li><p><code>type=&quot;p&quot;</code> :制定图形类型(<code>plot</code>)，“P”：点、“l”：线、“b”：点连线、“o”：点连线，线在点上、“h”：垂直线、“s”：阶梯式，垂直线顶端显示数据、“S”：阶梯式，垂直线低端显示数据</p></li><li><p><code>xlim=</code>,<code>ylim=</code>:指定轴的上下限</p></li><li><p><code>xlab=</code>,<code>ylab=</code>:坐标轴标签，必须为字符型值</p></li><li><p><code>main=</code>:主标题，字符型值</p></li><li><p><code>sub</code>: 副标题(小字体)</p></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;这是曾经R语言软件课程的简单笔记的概率函数部分，整理至此。可以先查看两组两组例子，感受一下： &lt;code&gt;demo(graphics)&lt;/code&gt;、&lt;code&gt;demo(persp)&lt;/code&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="R" scheme="https://www.hermitlsr.top/categories/R/"/>
    
    <category term="学习笔记" scheme="https://www.hermitlsr.top/categories/R/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="R" scheme="https://www.hermitlsr.top/tags/R/"/>
    
    <category term="绘图" scheme="https://www.hermitlsr.top/tags/%E7%BB%98%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>R语言的久远学习笔记--概率分布</title>
    <link href="https://www.hermitlsr.top/2021-06-23/f8ed4dd0.html"/>
    <id>https://www.hermitlsr.top/2021-06-23/f8ed4dd0.html</id>
    <published>2021-06-23T03:53:30.000Z</published>
    <updated>2021-07-13T04:53:06.880Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这是曾经R语言软件课程的简单笔记的概率函数部分，整理至此。</p> <span id="more"></span><h2 id="随机抽样"><a class="markdownIt-Anchor" href="#随机抽样"></a> 随机抽样</h2><p><code>sample(x, size, replace = FALSE, prob = NULL)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sample(<span class="built_in">c</span>(<span class="string">&quot;成功&quot;</span>, <span class="string">&quot;失败&quot;</span>), <span class="number">10</span>, replace = <span class="built_in">T</span>, prob = <span class="built_in">c</span>(<span class="number">0.9</span>, <span class="number">0.1</span>))</span><br></pre></td></tr></table></figure><h2 id="排列组合与概率的计算"><a class="markdownIt-Anchor" href="#排列组合与概率的计算"></a> 排列组合与概率的计算</h2><p><code>prod()</code> 返回连乘积<br /><code>choose()</code> 返回取法的数目</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1/<span class="built_in">prod</span>(<span class="number">52</span>:<span class="number">49</span>)</span><br><span class="line"><span class="number">1</span>/choose(<span class="number">52</span>,<span class="number">49</span>)</span><br></pre></td></tr></table></figure><h2 id="部分概率分布"><a class="markdownIt-Anchor" href="#部分概率分布"></a> 部分概率分布</h2><h3 id="二项分布binomnp"><a class="markdownIt-Anchor" href="#二项分布binomnp"></a> 二项分布：binom(n,p)</h3><p>分布律：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>n</mi><mo separator="true">,</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>n</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><msup><mi>p</mi><mi>x</mi></msup><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow><mi>n</mi><mo>−</mo><mi>x</mi></mrow></msup></mrow><annotation encoding="application/x-tex">f(x|n,p)=\begin{pmatrix}n\\x\end{pmatrix}p^x(1-p)^{n-x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.071331em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.821331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>数字特征：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mi>n</mi><mi>p</mi><mo separator="true">,</mo><mi>v</mi><mi>a</mi><mi>r</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mi>n</mi><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(X)=np,var(X)=np(1-p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mclose">)</span></span></span></span></p><p><code>dbinom(x, size, prob, log = FALSE)</code></p><p><code>pbinom(q, size, prob, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>qbinom(p, size, prob, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>rbinom(n, size, prob)</code></p><h3 id="正态分布normmusigma2"><a class="markdownIt-Anchor" href="#正态分布normmusigma2"></a> 正态分布：norm(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>,<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>)</h3><p>密度函数：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>μ</mi><mo separator="true">,</mo><mi>σ</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><msqrt><mrow><mn>2</mn><mi>π</mi></mrow></msqrt><mi>σ</mi></mrow></mfrac><msup><mi>e</mi><mfrac><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>μ</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac></msup></mrow><annotation encoding="application/x-tex">f(x|\mu,\sigma)=\frac{1}{\sqrt{2\pi}\sigma}e^{\frac{(x-\mu)^2}{2\sigma^2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault">μ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.25909em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.2027799999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.32909em;"><span style="top:-3.4534200000000004em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.250957142857143em;"><span style="top:-2.5061857142857145em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9384399999999999em;"><span style="top:-2.93844em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.5020714285714285em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">x</span><span class="mbin mtight">−</span><span class="mord mathdefault mtight">μ</span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.04844em;"><span style="top:-3.04844em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.49381428571428565em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>数字特征：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mi>μ</mi><mo separator="true">,</mo><mi>v</mi><mi>a</mi><mi>r</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E(X)=\mu,var(X)=\sigma^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">μ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p><p><code>dnorm(x, mean = 0, sd = 1, log = FALSE)</code></p><p><code>pnorm(q, mean = 0, sd = 1, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>qnorm(p, mean = 0, sd = 1, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>rnorm(n, mean = 0, sd = 1)</code></p><h3 id="泊松分布poislambda"><a class="markdownIt-Anchor" href="#泊松分布poislambda"></a> 泊松分布：pois(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">λ</span></span></span></span>)</h3><p>分布律：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>λ</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>λ</mi><mi>x</mi></msup><mrow><mi>x</mi><mo stretchy="false">!</mo></mrow></mfrac><msup><mi>e</mi><mrow><mo>−</mo><mi>λ</mi></mrow></msup></mrow><annotation encoding="application/x-tex">f(x|\lambda)=\frac{\lambda^x}{x!}e^{-\lambda}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault">λ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="mclose">!</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">λ</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>数字特征：$$E(X)=\lambda,var(X)=\lambda$$</p><p><code>dpois(x, lambda, log = FALSE)</code></p><p><code>ppois(q, lambda, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>qpois(p, lambda, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>rpois(n, lambda)</code></p><h3 id="均匀分布unifab"><a class="markdownIt-Anchor" href="#均匀分布unifab"></a> 均匀分布：unif(a,b)</h3><p>密度函数：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>b</mi><mo>−</mo><mi>a</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">f(x|a,b)=\frac{1}{b-a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.09077em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>数字特征：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mn>2</mn></mfrac><mo separator="true">,</mo><mi>v</mi><mi>a</mi><mi>r</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><msup><mi>b</mi><mn>2</mn></msup><mo>−</mo><msup><mi>a</mi><mn>2</mn></msup></mrow><mn>12</mn></mfrac></mrow><annotation encoding="application/x-tex">E(X)=\frac{a+b}{2},var(X)=\frac{b^2-a^2}{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.36292em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01792em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p><code>dunif(x, min = 0, max = 1, log = FALSE)</code></p><p><code>punif(q, min = 0, max = 1, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>qunif(p, min = 0, max = 1, lower.tail = TRUE, log.p = FALSE)</code></p><p><code>runif(n, min = 0, max = 1)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">require(DAAG)</span><br><span class="line">data(possum)</span><br><span class="line">fpossum &lt;- possum[possum$sex==<span class="string">&quot;f&quot;</span>, ]</span><br><span class="line">var(fpossum$totlngth)</span><br><span class="line">mad(fpossum$totlngth)^<span class="number">2</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;这是曾经R语言软件课程的简单笔记的概率函数部分，整理至此。&lt;/p&gt;</summary>
    
    
    
    <category term="R" scheme="https://www.hermitlsr.top/categories/R/"/>
    
    <category term="学习笔记" scheme="https://www.hermitlsr.top/categories/R/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="R" scheme="https://www.hermitlsr.top/tags/R/"/>
    
    <category term="概率分布" scheme="https://www.hermitlsr.top/tags/%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 文章永久链接设置</title>
    <link href="https://www.hermitlsr.top/2021-06-22/e83798a9.html"/>
    <id>https://www.hermitlsr.top/2021-06-22/e83798a9.html</id>
    <published>2021-06-22T15:51:12.000Z</published>
    <updated>2021-07-13T04:49:06.730Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>  在使用Hexo写博客时，使用中文博客标题生成的永久链接是冗长且无意义的，这不利于进行SEO，且不易读。一个好的永久链接应该体现文章内容，本文介绍在Hexo中如何自定义永久链接。</p><p>urlname: Hexo-wzyjljsz</p><span id="more"></span><h2 id="永久链接介绍"><a class="markdownIt-Anchor" href="#永久链接介绍"></a> 永久链接介绍</h2><p>  永久链接是什么<span class='btn'><a class="button" href='https://hexo.io/zh-cn/docs/permalinks.html，' title='Hexo官方介绍'>Hexo官方介绍</a></span>：</p><details cyan><summary> 维基百科的定义 </summary>              <div class='content'>              <blockquote><p><strong>固定链接</strong>（<strong>PermaLink</strong>，<strong>Permanent Link</strong>的缩写）或称“<strong>永久链接</strong>”或“<strong>静态链接</strong>”，意指向一个特定<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97">网络日志</a>（<a href="https://zh.wikipedia.org/w/index.php?title=WebLog&amp;action=edit&amp;redlink=1">WebLog</a>，<a href="https://zh.wikipedia.org/wiki/Blog">Blog</a>）的永久固定标识符。一般情况下，固定链接指向的均为一个网络日志条目（<a href="https://zh.wikipedia.org/w/index.php?title=Entry&amp;action=edit&amp;redlink=1">Entry</a>）的独立网页。默认存档设置包含基于<a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a>的存档和单独文件存档。默认情况下，固定链接被设置为链接到一个条目的单独存档页面中。你可以在网络日志的下方，或者在“发布时间”之后，看到 Permalink。点击 Permalink 将会把访问者导向到专属于该条目 (Entry) 的独立网页中，一般包含“添加评论”等功能。</p><p>如果可能的话，一般的静态链接会尽量使得网址本身是有意义（人类可读）的，例如网址本身就含有该篇博客的标题。然而由于<a href="https://zh.wikipedia.org/wiki/Unicode">Unicode</a>在网址需要特殊编码，因此非英文的语言比较难做到这点。</p></blockquote>              </div>            </details><details cyan><summary> 最初作用 </summary>              <div class='content'>              <blockquote><p>永久链接最初主要是为了做<a href="https://baike.baidu.com/item/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E4%BC%98%E5%8C%96/3132">搜索引擎优化</a>(SEO)，因为搜索引擎的机器人对静态的URL有偏好，所以对于动态生成的页面，人们想出了这么个办法来使其假扮成一个静态的页面，以便让搜索引擎更好的索引网站内容;另外一个初衷是增加URL地址的可读性。</p></blockquote>              </div>            </details><p>  简单来讲，永久链接是网页的完整网址 (url) ，这个网址永远不会改变的。一般而言，希望这个网址是有意义的 (人类可读)，例如网址中含有的博客标题。但是使用非英文语言作为标题会导致生成的永久链接是不可读的冗长的编码内容。Hexo默认使用博客文章标题作为永久链接，这就需要我们重新定义永久链接中的非英文语言部分。</p><h2 id="基本设置"><a class="markdownIt-Anchor" href="#基本设置"></a> 基本设置</h2><p>设置步骤：</p><ol><li>修改博客根目录中站点设置文件 <code>_config.yml</code></li><li>修改发布文章模板 <code>...\scaffolds\post.md</code></li></ol><h3 id="修改博客根目录中站点设置文件"><a class="markdownIt-Anchor" href="#修改博客根目录中站点设置文件"></a> 修改博客根目录中站点设置文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://hermitlsr.top</span></span><br><span class="line"><span class="string">permalink:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure><p>Hexo默认的永久链接格式是：<code>permalink:year/:month/:day/:title/</code> ，</p><p>例如本篇文章如果按照原始格式，其永久链接将是：<code>https://hermitlsr.top/2021/06/22/Hexo%20%E6%96%87%E7%AB%A0%E6%B0%B8%E4%B9%85%E9%93%BE%E6%8E%A5%E8%AE%BE%E7%BD%AE/</code></p><p>将在浏览器地址中显示： <code>https://hermitlsr.top/2021/06/22/Hexo%20文章永久链接设置/</code></p><p>  事实上如若复制浏览器中的地址得到的还是上面冗长的编码的，浏览器地址中的显示是编码过的。另外，默认格式中的日期格式是递进的关系，我个人认为层次太多，可以直接设置为 <code>/2021-06-22/</code> 的形式，当然你也可以根据自己的需求进行设定删减。为此可以做如下更改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://hermitlsr.top</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year-:month-:day/:urlname/</span> <span class="comment"># :year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure><p>  将永久链接的格式设置为：<code>permalink: :year-:month-:day/:urlname/</code> ，其中 <code>urlname</code> 是自定义的文章地址，可以和文章标题不一致。在下采用的方式是使用文章标题拼音首字母代替原有的部分，这可以根据个人喜好习惯自行设置。</p><h3 id="修改发布文章模板"><a class="markdownIt-Anchor" href="#修改发布文章模板"></a> 修改发布文章模板</h3><p>  前面提到的 <code>urlname</code> 需要设置在文章开头的 <code>front-matter</code> 中，在 Volantis 主题中的详情参数可见 <span class='btn'><a class="button" href='https://volantis.js.org/v5/page-settings' title='Volantis front-matter'>Volantis front-matter</a></span>，如：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span> <span class="string">文章永久链接设置</span></span><br><span class="line"><span class="attr">mathjax:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">urlname:</span> <span class="string">Hexo-wzyjljsz</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2021-06-22 23:51:12</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>  这里将 <code>urlname</code> 设置为 <code>Hexo-wzyjljsz</code> ，此时的永久链接就变成了：<code>https://hermitlsr.top/2021-06-22/Hexo-wzyjljsz/</code> ，非常清爽明了。</p><p>  自定义永久链接的设置在这里基本完成了。如果不想每次写博文时都要再输入一遍 <code>urlname:</code> 需要修改发布文章的模板 (<code>post</code>)，对于草稿 (<code>draft</code>) 可一样处理。</p><p>在站点文件中找到 <code>...\scaffolds\post.md</code> 文件，在其中设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> &#123;&#123; <span class="string">title</span> &#125;&#125;</span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">date</span> &#125;&#125;</span><br><span class="line"><span class="attr">urlname:</span></span><br><span class="line"><span class="attr">mathjax:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">cover:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">thumbnail:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">headimg:</span> </span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="attr">categories:</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>在下因为文章基本都要进行公式渲染，所以还在这里设置了 <code>mathjax: true</code> ，具体需要设置的内容可根据自身需求而定。</p><h2 id="更多修改"><a class="markdownIt-Anchor" href="#更多修改"></a> 更多修改</h2><p>使用 <code>hexo new post &quot; &quot;</code> 新建文章的时候，默认文章命名不方便日后的文章查找整理，这里一并进行设置，最后的格式是这样的：<code>2021-06-22--Hexo 文章永久链接设置.md</code> ，加上文章前缀之后更便于管理。</p><p>这里只需要设置博客根目录站点设置文件 <code>_config.yml</code> 中 <code>new_post_name</code> 即可：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">new_post_name:</span> <span class="string">:year-:month-:day--:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;  在使用Hexo写博客时，使用中文博客标题生成的永久链接是冗长且无意义的，这不利于进行SEO，且不易读。一个好的永久链接应该体现文章内容，本文介绍在Hexo中如何自定义永久链接。&lt;/p&gt;
&lt;p&gt;urlname: Hexo-wzyjljsz&lt;/p&gt;</summary>
    
    
    
    <category term="Hexo" scheme="https://www.hermitlsr.top/categories/Hexo/"/>
    
    <category term="写作技巧" scheme="https://www.hermitlsr.top/categories/Hexo/%E5%86%99%E4%BD%9C%E6%8A%80%E5%B7%A7/"/>
    
    
    <category term="Hexo" scheme="https://www.hermitlsr.top/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>时序分析-确定性趋势参数估计</title>
    <link href="https://www.hermitlsr.top/2021-06-22/2abc08a6.html"/>
    <id>https://www.hermitlsr.top/2021-06-22/2abc08a6.html</id>
    <published>2021-06-22T09:38:44.000Z</published>
    <updated>2021-07-13T04:04:35.972Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>  学习《时间序列分析及应用·Jonathan D.Cryer &amp; Kung-Sik Chan 著》一书时的相关笔记——对于确定性趋势的参数估计，大致有五种：常均值模型、线性模型、二次式模型、季节均值模型、余弦模型。虽然每种模型各有特点和要求，但对于参数求解，一般都是使用OLSE。其区别仅在与设计矩阵的构造。本文将介绍这五种模型参数估计的R语言自编程序的实现。</p><span id="more"></span><h2 id="常均值模型"><a class="markdownIt-Anchor" href="#常均值模型"></a> 常均值模型</h2><ol><li><strong>参数估计的R语言函数</strong></li></ol><p>  常均值模型为：$$Y_t=\mu+X_t$$ 其中对所有的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> 有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">E(X)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>。使用观测到的时间序列 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>Y</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">Y_1,Y_2,…,Y_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 来估计<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span> 。则可由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mi>L</mi><mi>S</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">OLSE</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>得出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>的估计为样本均值或平均数，定义为$$\bar{Y}=\frac{1}{n}\sum_{t=1}^n Y_t$$在模型假设成立的前提下，可以看出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mover accent="true"><mi>Y</mi><mo>ˉ</mo></mover><mo stretchy="false">)</mo><mo>=</mo><mi>μ</mi></mrow><annotation encoding="application/x-tex">E(\bar{Y})=\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.07011em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201099999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;">ˉ</span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>，基于此常均值模型的参数估计算法函数<code>ConReg()</code>如下:</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ConReg &lt;- <span class="keyword">function</span>(Y)&#123;</span><br><span class="line"></span><br><span class="line">  mu = <span class="built_in">sum</span>(Y) / <span class="built_in">length</span>(Y)</span><br><span class="line">  out = <span class="built_in">list</span>(Y=Y, mu=mu)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>参数估计的R语言函数检验</strong></li></ol><p>  由于课本并未给出相关数据，下面人为生成一组数据进行验证，做法如下：令模型中的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\mu=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mi>t</mi></msub><mo>∼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X_t\sim N(0,1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，通过模型生成一组<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Y</mi><mi>t</mi></msub><mo separator="true">,</mo><mi>t</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">Y_t,t=1,…,100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>,以此使用上述函数<code>ConReg()</code>估计<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span></span></span></span>的值，比较真实的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\mu=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>，判断算法的正确性。代码如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set.seed(<span class="number">1</span>)</span><br><span class="line">mu = <span class="number">2</span></span><br><span class="line">X &lt;- rnorm(<span class="number">100</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">Y &lt;- mu + X + rnorm(<span class="number">100</span>, <span class="number">0</span>, <span class="number">.2</span>)</span><br><span class="line">muest &lt;- ConReg(Y)</span><br><span class="line">muest$mu</span><br></pre></td></tr></table></figure><p>  可以计算得估计<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi><mo>=</mo><mn>2.101</mn></mrow><annotation encoding="application/x-tex">\mu=2.101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span></span></span></span>，与真实值相差不大，可以认为函数<code>ConReg()</code>是合理的。</p><h2 id="线性模型"><a class="markdownIt-Anchor" href="#线性模型"></a> 线性模型</h2><ol><li><strong>参数估计的R语言函数</strong></li></ol><p>  对于线性模型$$\mu_t=\beta_0+\beta_1t+\beta_2t+…+\beta_nt$$ 类似的可通过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mi>L</mi><mi>S</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">OLSE</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>，计算得起参数估计<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span>应该为：$$\beta=(X’X)^{-1}XY$$基于此给出线性模型参数估计的模型<code>LinReg()</code>代码如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">LinReg &lt;- <span class="keyword">function</span>(X, y, lambda = <span class="number">0</span>, intercept = <span class="built_in">T</span>)&#123;</span><br><span class="line">  n = <span class="built_in">dim</span>(X)[<span class="number">1</span>]</span><br><span class="line">  p = <span class="built_in">dim</span>(X)[<span class="number">2</span>]</span><br><span class="line">  </span><br><span class="line">  <span class="comment">#Coefficients</span></span><br><span class="line">  <span class="keyword">if</span>(intercept == <span class="built_in">T</span>)&#123;</span><br><span class="line">    X. = cbind(<span class="built_in">rep</span>(<span class="number">1</span>,n), X)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    X. = X</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  beta = solve(t(X.)%*%X. + lambda*diag(<span class="built_in">dim</span>(X.)[<span class="number">2</span>]), t(X.)%*%y)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (intercept == <span class="built_in">T</span>)&#123;</span><br><span class="line">    beta1 = beta[<span class="number">2</span>:(p+<span class="number">1</span>)]</span><br><span class="line">    beta0 = beta[<span class="number">1</span>]</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    beta1 = beta</span><br><span class="line">    beta0 =<span class="literal">NULL</span> </span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  out = <span class="built_in">list</span>(X=X, y=y, beta=beta1, beta0 = beta0, </span><br><span class="line">             intercept = intercept )</span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><strong>参数估计的R语言函数检验</strong></li></ol><p>  类似于常均值模型，人为产生数据进行验证，代码如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">n &lt;- 100</span><br><span class="line">p &lt;- 6</span><br><span class="line">set.seed(<span class="number">1</span>)</span><br><span class="line">X &lt;- matrix(rnorm(n*p), n, p)</span><br><span class="line">beta = <span class="built_in">c</span>(<span class="number">3</span>, <span class="number">1</span>, <span class="built_in">rep</span>(<span class="number">0</span>,p-<span class="number">2</span>))</span><br><span class="line">beta0 = <span class="number">0</span></span><br><span class="line">set.seed(<span class="number">1</span>)</span><br><span class="line">y = X%*%beta + beta0 + rnorm(<span class="number">100</span>, <span class="number">0</span>, <span class="number">.2</span>)</span><br><span class="line"></span><br><span class="line">result &lt;- LinReg(X, y)</span><br><span class="line">result$beta</span><br><span class="line">result$beta0</span><br></pre></td></tr></table></figure><p>  可以看出估计的参数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>β</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1523199999999998em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span></span>与真实值非常接近，认为该函数没有问题。</p><h2 id="二次模型"><a class="markdownIt-Anchor" href="#二次模型"></a> 二次模型</h2><ol><li><strong>参数估计的R语言函数</strong></li></ol><p>  对于二次模型我们可以将其转化为线性模型进行参数估计，一般的二次模型如下：$$\mu_t=\beta_0+\beta_1t^2$$我们可以令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub><mo>=</mo><mn>1</mn><mo separator="true">,</mo><msub><mi>X</mi><mn>1</mn></msub><mo>=</mo><msup><mi>t</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">X_0=1,X_1=t^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>，这样将其转为，设计矩阵为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>=</mo><mo stretchy="false">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>X</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>X</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X=(\begin{matrix}X_0&amp;X_1 \end{matrix})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2000000000000002em;vertical-align:-0.35000000000000003em;"></span><span class="mopen">(</span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8500000000000001em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35000000000000003em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8500000000000001em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35000000000000003em;"><span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>的线性模型，为方便以后的函数调用，在设计R语言函数时推广为多项式模型，代码如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PolyDes &lt;- <span class="keyword">function</span>(t)&#123;</span><br><span class="line">  n &lt;- <span class="built_in">length</span>(t[, <span class="number">1</span>])</span><br><span class="line">  p &lt;- <span class="built_in">length</span>(t[<span class="number">1</span>, ])</span><br><span class="line">  X &lt;- matrix(nrow = n, ncol = p)</span><br><span class="line">  <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:p) &#123;</span><br><span class="line">    X[, i] &lt;- t[, i]^i</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  out = X</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><strong>参数估计的R语言函数检验</strong></li></ol><p>  函数<code>PolyDes()</code>仅给出多项式模型的设计矩阵，要求其参数估计可再次调用线性模型函数<code>LinRes()</code>。以下给出模型的验证：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">beta &lt;- <span class="built_in">c</span>(<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">beta0 &lt;- 0</span><br><span class="line"></span><br><span class="line">t &lt;- matrix(nrow = <span class="number">100</span>, ncol = <span class="number">5</span>)</span><br><span class="line">set.seed(<span class="number">1</span>)</span><br><span class="line">r &lt;- matrix(rnorm(<span class="number">100</span>*<span class="number">5</span>), <span class="number">100</span>, <span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">5</span>) &#123;</span><br><span class="line">  t[, i] = <span class="number">6</span>-i + r[, i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">y = beta0 + t[,<span class="number">1</span>]*beta[<span class="number">1</span>] + t[,<span class="number">2</span>]^<span class="number">2</span>*beta[<span class="number">2</span>] + t[,<span class="number">3</span>]^<span class="number">3</span>*beta[<span class="number">3</span>] + t[,<span class="number">4</span>]^<span class="number">4</span>*beta[<span class="number">4</span>]     + t[,<span class="number">5</span>]^<span class="number">5</span>*beta[<span class="number">5</span>]+rnorm(<span class="number">100</span>, <span class="number">0</span>, <span class="number">.2</span>)</span><br><span class="line"></span><br><span class="line">X &lt;- PolyDes(t)</span><br><span class="line"></span><br><span class="line">result &lt;- LinReg(X,y)</span><br><span class="line">result$beta</span><br><span class="line">result$beta0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  对比估计的参数和真实的参数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span>是很接近的，可以认为函数是有效的。</p><h2 id="季节趋势模型"><a class="markdownIt-Anchor" href="#季节趋势模型"></a> 季节趋势模型</h2><ol><li><strong>参数估计的R语言函数</strong></li></ol><p>  对季节性趋势模型，其观测到的数据可表示为$$Y_t=\mu_t+X_t$$,其中，对所有t，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">E(X_t)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>。对于月度季节新数据，对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>μ</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\mu_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>最常用的假设是存在12个常数（参数）<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>β</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>β</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>β</mi><mn>12</mn></msub></mrow><annotation encoding="application/x-tex">\beta_1,\beta_2,\cdots,\beta_{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，它们给出了12个月的期望平均气温。可以记为：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>μ</mi><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>β</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>13</mn><mo separator="true">,</mo><mn>15</mn><mo separator="true">,</mo><mo>…</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>β</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mn>14</mn><mo separator="true">,</mo><mn>16</mn><mo separator="true">,</mo><mo>…</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="normal">⋮</mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>β</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mo>=</mo><mn>12</mn><mo separator="true">,</mo><mn>24</mn><mo separator="true">,</mo><mn>36</mn><mo separator="true">,</mo><mo>…</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\mu=\begin{cases}\beta_1&amp;t=1,13,15,…\\ \beta_2&amp;t=2,14,16,…\\ \vdots \\ \beta_{12}&amp;t=12,24,36,…\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:6.252000000000001em;vertical-align:-2.876em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500199999999997em;"><span style="top:-1.2999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-1.2999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.5999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.8999899999999998em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.1999899999999997em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.15001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.90001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-5.20001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-5.500019999999999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.3760000000000003em;"><span style="top:-6.0555em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.615500000000001em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.6835000000000004em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.2435em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.876em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.3760000000000003em;"><span style="top:-5.376000000000001em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span></span></span><span style="top:-3.9360000000000004em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span></span></span><span style="top:-0.5640000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.876em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>该模型有时被称为<strong>季节均值</strong>模型。<br />  对于季节均值模型的估计，关键点在于将模型按月进行参数估计，这需要对设计矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>进行特殊处理。这里的处理是，设计矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>是大小为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>×</mo><mn>12</mn></mrow><annotation encoding="application/x-tex">n×12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span></span></span></span>的示性矩阵，n为季节性时间序列的长度。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>的每一行就为一个示性函数，仅有唯一一个位置为1，即对于确定的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>表示第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>个数据是第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>月的。值得注意的是对于有截距项的模型如下：</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>μ</mi><mi>t</mi></msub><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><msub><mi>β</mi><mn>2</mn></msub><mi>I</mi><mo stretchy="false">(</mo><mi>t</mi><mi mathvariant="normal">%</mi><mn>12</mn><mo>=</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>β</mi><mn>12</mn></msub><mi>I</mi><mo stretchy="false">(</mo><mi>t</mi><mi mathvariant="normal">%</mi><mn>12</mn><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mu_t=\beta_0+\beta_2I(t\%12=2)+\cdots+\beta_{12}I(t\%12=0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">%</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">%</span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span></p><p>参考前面的线性参数进估计，季节均值模型参数估计代码如下:</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">SeaReg &lt;- <span class="keyword">function</span>(y, intercept = <span class="built_in">F</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span> (!is.ts(y)) </span><br><span class="line">        stop(<span class="string">&quot;y need to be a time series&quot;</span>)</span><br><span class="line">  n &lt;- <span class="built_in">length</span>(y)</span><br><span class="line">  X &lt;- matrix(ncol = <span class="number">12</span>, nrow = n)</span><br><span class="line">  </span><br><span class="line">  month &lt;-<span class="built_in">c</span>(<span class="string">&quot;January&quot;</span>, <span class="string">&quot;February&quot;</span>, <span class="string">&quot;March&quot;</span>, <span class="string">&quot;April&quot;</span>, <span class="string">&quot;May&quot;</span>, <span class="string">&quot;June&quot;</span>,</span><br><span class="line">            <span class="string">&quot;July&quot;</span>, <span class="string">&quot;August&quot;</span>, <span class="string">&quot;September&quot;</span>, <span class="string">&quot;October&quot;</span>, <span class="string">&quot;November&quot;</span>, <span class="string">&quot;December&quot;</span>)</span><br><span class="line">  month.y &lt;- <span class="built_in">as.character</span>(season(y))</span><br><span class="line">  <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:n) &#123;</span><br><span class="line">    <span class="keyword">for</span> (j <span class="keyword">in</span> <span class="number">1</span>:<span class="number">12</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>(month.y[i]==month[j])&#123;</span><br><span class="line">        X[i,j] = <span class="number">1</span> </span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        X[i,j] = <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(intercept == <span class="built_in">F</span>)&#123;</span><br><span class="line">    X. = X</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    X[, <span class="number">1</span>]=<span class="built_in">rep</span>(<span class="number">1</span>, n)</span><br><span class="line">    X. = X</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  beta = solve(t(X.)%*%X., t(X.)%*%y)</span><br><span class="line">  out = <span class="built_in">list</span>(y=y, X=X., beta=beta,intercept = intercept )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><strong>参数估计的R语言函数检验</strong></li></ol><p>  为对季节性趋势模型函数<code>SeaReg()</code>进行检验，采用<code>TSA</code>包中的<code>tempdub</code>数据进行检验。代码如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">library(TSA)</span><br><span class="line">data(<span class="string">&quot;tempdub&quot;</span>)</span><br><span class="line"><span class="comment">#无截距项</span></span><br><span class="line">result1 &lt;- SeaReg(tempdub)</span><br><span class="line">result1$beta</span><br><span class="line"><span class="comment">#有截距项</span></span><br><span class="line">result2 &lt;- SeaReg(tempdub, intercept = <span class="built_in">T</span>)</span><br><span class="line">result2$beta</span><br></pre></td></tr></table></figure><p>  对比《时间序列》P24页的数据可知，有截距项和无截距项的参数估计的结果是基本一致的，故而该函数是可以接受的。</p><h2 id="余弦趋势模型"><a class="markdownIt-Anchor" href="#余弦趋势模型"></a> 余弦趋势模型</h2><ol><li><strong>参数估计的R语言函数</strong></li></ol><p>  余弦趋势模型的最简单形式可表示为:$$\mu_t=\beta_0+\beta_1cos(2\pi ft)+\beta_2sin(2\pi ft)$$类比二项式模型可知，其可也转换为线性模型求解，只不过需要对其设计矩阵做一定的设置，代码如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CosDes &lt;- <span class="keyword">function</span>(y, f=<span class="number">1</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span> (!is.ts(y))</span><br><span class="line">        stop(<span class="string">&quot;y need to be a time series&quot;</span>)</span><br><span class="line">  n = <span class="built_in">length</span>(y)</span><br><span class="line">  t = <span class="built_in">as.numeric</span>(time(y))</span><br><span class="line">  X1 = <span class="built_in">cos</span>(<span class="number">2</span>*<span class="built_in">pi</span>*f*t)</span><br><span class="line">  X2 = <span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*f*t)</span><br><span class="line"> </span><br><span class="line">  X = cbind(X1, X2)</span><br><span class="line">  out = X</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><strong>参数估计的R语言函数检验</strong></li></ol><p>  采用<code>TSA</code>包中的<code>tempdub</code>数据进行检验。使用默认频率<code>f=1</code>，代码如下：</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">library(TSA)</span><br><span class="line">data(<span class="string">&quot;tempdub&quot;</span>)</span><br><span class="line">X &lt;- CosDes(tempdub, <span class="number">1</span>)</span><br><span class="line">result&lt;-LinReg(X,tempdub)</span><br><span class="line">result$beta</span><br><span class="line">result$beta0</span><br></pre></td></tr></table></figure><p>  可以看到其参数估计的结果与课本P25页表3-5的数据一致，说明该函数的确可以完成余弦趋势模型的设计矩阵变换。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;  学习《时间序列分析及应用·Jonathan D.Cryer &amp;amp; Kung-Sik Chan 著》一书时的相关笔记——对于确定性趋势的参数估计，大致有五种：常均值模型、线性模型、二次式模型、季节均值模型、余弦模型。虽然每种模型各有特点和要求，但对于参数求解，一般都是使用OLSE。其区别仅在与设计矩阵的构造。本文将介绍这五种模型参数估计的R语言自编程序的实现。&lt;/p&gt;</summary>
    
    
    
    <category term="时序分析" scheme="https://www.hermitlsr.top/categories/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/"/>
    
    <category term="学习笔记" scheme="https://www.hermitlsr.top/categories/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="R" scheme="https://www.hermitlsr.top/tags/R/"/>
    
    <category term="时序分析" scheme="https://www.hermitlsr.top/tags/%E6%97%B6%E5%BA%8F%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>R语言的久远学习笔记--数据结构</title>
    <link href="https://www.hermitlsr.top/2021-06-22/75c03109.html"/>
    <id>https://www.hermitlsr.top/2021-06-22/75c03109.html</id>
    <published>2021-06-22T09:02:03.000Z</published>
    <updated>2021-07-13T04:49:06.714Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这是曾经R语言软件课程的简单笔记的数据结构部份，整理至此。</p> <span id="more"></span><p>所有R语言对象都有两个内在属性，类型和长度。类型是对象元素的基本种类，共有四种：</p><ol><li><p>数值型——整型、单精度实型、双精度实型</p></li><li><p>字符型</p></li><li><p>复数型</p></li><li><p>逻辑型(FALSE、TRUE或NA)</p></li></ol><p>常用<code>mode()</code>、<code>class()</code>、<code>length</code>得到类型和长度</p><p>注：mode：表示对象在内存中的存储类型</p><p>基本数据类型’atomic’ mode：</p><p>numeric（Integer/double）, complex, character和logical</p><p>递归的对象（recursive object）：</p><p>‘list’ 或 ‘function’</p><p>class：是一种抽象类型，或者理解为一种数据结构</p><p>他主要是用来给泛型函数（参考java中泛型的概念）识别参数用。</p><h2 id="对象"><a class="markdownIt-Anchor" href="#对象"></a> 对象</h2><p>对象有7种：向量、因子、数组、矩阵(特殊的数组)、数据框、时间序列(ts)、列表</p><p>基本运算中：<code>xor()</code>异或函数：a⊕b = (¬a ∧ b) ∨ (a ∧¬b) 逻辑运算</p><h3 id="浏览对象的信息"><a class="markdownIt-Anchor" href="#浏览对象的信息"></a> 浏览对象的信息</h3><p><code>ls()</code>返回环境中的对象名称，参数<code>pattern</code>指定含有某个字母，<code>^</code>指定首字母：<code>ls(pat=&quot;^m&quot;)</code></p><p><code>ls.str()</code> 显示内存中所有对象的详细情况，<code>max.level=-1</code>避免结果过长</p><h3 id="向量"><a class="markdownIt-Anchor" href="#向量"></a> 向量</h3><p><code>seq(from = , to = , by = ((to - from)/(length.out - 1)),length.out = NULL)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq(from = <span class="number">2</span>, to = <span class="number">5</span>, by = <span class="number">0.5</span>)</span><br><span class="line">seq(from = <span class="number">2</span>, to = <span class="number">5</span>, length.out = <span class="number">7</span>)</span><br></pre></td></tr></table></figure><p><code>rep(x, times = 1, length.out = NA, each = 1)</code></p><p><code>times</code> x重复的次数；<code>each</code> x中每一个元素重复的次数</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rep</span>(<span class="number">2</span>:<span class="number">5</span>, times = <span class="number">2</span>)</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">2</span>:<span class="number">5</span>, each = <span class="number">2</span>)</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">2</span>:<span class="number">5</span>, times = <span class="number">2</span>, each = <span class="number">2</span>)</span><br><span class="line"><span class="built_in">rep</span>(<span class="number">2</span>:<span class="number">5</span>, <span class="built_in">c</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>))  <span class="comment"># 2:5 中的每个元素按c(2,3,4,5)重复 </span></span><br></pre></td></tr></table></figure><p><code>sequence()</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sequence(<span class="number">5</span>:<span class="number">10</span>)</span><br><span class="line">sequence(<span class="number">10</span>:<span class="number">5</span>)</span><br><span class="line">sequence(<span class="built_in">c</span>(<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure><h3 id="字符"><a class="markdownIt-Anchor" href="#字符"></a> 字符</h3><p><code>paste (..., sep = &quot; &quot;, collapse = NULL)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">paste(<span class="built_in">c</span>(<span class="string">&quot;X&quot;</span>, <span class="string">&quot;Y&quot;</span>), <span class="number">1</span>:<span class="number">10</span>, sep = <span class="string">&quot;&quot;</span>)</span><br><span class="line">paste(<span class="built_in">c</span>(<span class="string">&quot;X&quot;</span>, <span class="string">&quot;Y&quot;</span>, <span class="string">&quot;Z&quot;</span>), <span class="number">1</span>:<span class="number">5</span>, sep = <span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="因子"><a class="markdownIt-Anchor" href="#因子"></a> 因子</h3><p><code>factor(x = character(), levels, labels = levels, ordered = is.ordered(x) )</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">factor(x = <span class="built_in">LETTERS</span>[<span class="number">1</span>:<span class="number">3</span>], levels = <span class="built_in">c</span>(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>))</span><br><span class="line">factor(x = <span class="built_in">LETTERS</span>[<span class="number">1</span>:<span class="number">3</span>], labels = <span class="number">1</span>:<span class="number">3</span>)</span><br><span class="line">factor(x = <span class="built_in">LETTERS</span>[<span class="number">1</span>:<span class="number">3</span>], labels = <span class="built_in">c</span>(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line">factor(x = <span class="built_in">LETTERS</span>[<span class="number">1</span>:<span class="number">3</span>], </span><br><span class="line">levels = <span class="built_in">c</span>(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>), labels  = <span class="built_in">c</span>(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure><p><code>gl(n, k, length = n*k, labels = seq_len(n), ordered = FALSE)</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gl(<span class="number">2</span>, <span class="number">3</span>, labels = seq(<span class="number">2</span>))</span><br><span class="line">gl(<span class="number">2</span>, <span class="number">3</span>, <span class="built_in">length</span> = <span class="number">10</span>, labels = seq(<span class="number">3</span>))</span><br></pre></td></tr></table></figure><h3 id="数组和矩阵"><a class="markdownIt-Anchor" href="#数组和矩阵"></a> 数组和矩阵</h3><ol><li><code>array(data, dim, dimnames)</code></li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Create two vectors of different lengths.</span></span><br><span class="line">vector1 &lt;- <span class="built_in">c</span>(<span class="number">5</span>,<span class="number">9</span>,<span class="number">3</span>)</span><br><span class="line">vector2 &lt;- <span class="built_in">c</span>(<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>)</span><br><span class="line">column.names &lt;- <span class="built_in">c</span>(<span class="string">&quot;COL1&quot;</span>,<span class="string">&quot;COL2&quot;</span>,<span class="string">&quot;COL3&quot;</span>)</span><br><span class="line">column.names &lt;- paste0(<span class="string">&quot;COL&quot;</span>, seq(<span class="number">3</span>))</span><br><span class="line">row.names &lt;- <span class="built_in">c</span>(<span class="string">&quot;ROW1&quot;</span>,<span class="string">&quot;ROW2&quot;</span>,<span class="string">&quot;ROW3&quot;</span>)</span><br><span class="line">matrix.names &lt;- <span class="built_in">c</span>(<span class="string">&quot;Matrix1&quot;</span>,<span class="string">&quot;Matrix2&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Take these vectors as input to the array.</span></span><br><span class="line">result &lt;- array(<span class="built_in">c</span>(vector1,vector2),<span class="built_in">dim</span> = <span class="built_in">c</span>(<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>),<span class="built_in">dimnames</span> = <span class="built_in">list</span>(row.names,</span><br><span class="line">   column.names, matrix.names))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the third row of the second matrix of the array.</span></span><br><span class="line">print(result[<span class="number">3</span>,,<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the element in the 1st row and 3rd column of the 1st matrix.</span></span><br><span class="line">print(result[<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the 2nd Matrix.</span></span><br><span class="line">print(result[,,<span class="number">2</span>])</span><br></pre></td></tr></table></figure><ol start="2"><li>对矩阵运算 <code>apply()</code>、<code>sweep</code>函数</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">A &lt;- matrix(seq(<span class="number">9</span>), ncol=<span class="number">3</span>)</span><br><span class="line">B &lt;- matrix(<span class="number">4</span>:<span class="number">15</span>, ncol=<span class="number">3</span>)</span><br><span class="line">C &lt;- matrix(<span class="built_in">rep</span>(<span class="built_in">c</span>(<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>),<span class="number">2</span>), ncol=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Create a list of matrices</span></span><br><span class="line">MyList &lt;- <span class="built_in">list</span>(A,B,C)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Extract the 2nd column from `MyList` with the selection operator `[` with `lapply()`</span></span><br><span class="line">lapply(MyList,<span class="string">&quot;[&quot;</span>, , <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Extract the 1st row from `MyList`</span></span><br><span class="line">lapply(MyList,<span class="string">&quot;[&quot;</span>, <span class="number">1</span>, )</span><br></pre></td></tr></table></figure><ol start="3"><li>数据切片<code>sweep</code></li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NOT RUN &#123;</span></span><br><span class="line">require(stats) <span class="comment"># for median</span></span><br><span class="line">med.att &lt;- apply(attitude, <span class="number">2</span>, median)</span><br><span class="line">sweep(data.matrix(attitude), <span class="number">2</span>, med.att)  <span class="comment"># subtract the column medians</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## More sweeping:</span></span><br><span class="line">A &lt;- array(<span class="number">1</span>:<span class="number">24</span>, <span class="built_in">dim</span> = <span class="number">4</span>:<span class="number">2</span>)</span><br><span class="line"><span class="comment">## no warnings in normal use</span></span><br><span class="line">sweep(A, <span class="number">1</span>, <span class="number">5</span>);sweep(A, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">(A.min &lt;- apply(A, <span class="number">1</span>, <span class="built_in">min</span>))  <span class="comment"># == 1:4</span></span><br><span class="line">sweep(A, <span class="number">1</span>, A.min)</span><br><span class="line">sweep(A, <span class="number">1</span>:<span class="number">2</span>, apply(A, <span class="number">1</span>:<span class="number">2</span>, median))</span><br><span class="line"></span><br><span class="line"><span class="comment">## warnings when mismatch</span></span><br><span class="line">sweep(A, <span class="number">1</span>, <span class="number">1</span>:<span class="number">3</span>)  <span class="comment"># STATS does not recycle</span></span><br><span class="line">sweep(A, <span class="number">1</span>, <span class="number">6</span>:<span class="number">1</span>)  <span class="comment"># STATS is longer</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## exact recycling:</span></span><br><span class="line">sweep(A, <span class="number">1</span>, <span class="number">1</span>:<span class="number">2</span>)  <span class="comment"># no warning</span></span><br><span class="line">sweep(A, <span class="number">1</span>, as.array(<span class="number">1</span>:<span class="number">2</span>))  <span class="comment"># warning</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br></pre></td></tr></table></figure><h3 id="数据框"><a class="markdownIt-Anchor" href="#数据框"></a> 数据框</h3><p><code>data.fram()</code><br />注意函数<code>rownames()</code>、<code>colnames()</code>、<code>attach()</code>、<code>with</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">attach(Puromycin)</span><br><span class="line">xtabs(~state + conc, data = Puromycin)</span><br><span class="line">summary(Puromycin)</span><br><span class="line">pairs(Puromycin, panel = panel.smooth)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="列表"><a class="markdownIt-Anchor" href="#列表"></a> 列表</h3><p>略</p><h3 id="时间序列"><a class="markdownIt-Anchor" href="#时间序列"></a> 时间序列</h3><p><code>ts(data = NA, start = 1, end = numeric(), frequency = 1,deltat = 1, ts.eps = getOption(&quot;ts.eps&quot;), class = , names = )</code></p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">A &lt;- ts(<span class="number">1</span>:<span class="number">10</span>, start = <span class="number">1959</span>)</span><br><span class="line">ts(<span class="number">1</span>:<span class="number">47</span>, frequency = <span class="number">12</span>, start = <span class="built_in">c</span>(<span class="number">1959</span>, <span class="number">2</span>))</span><br><span class="line">ts(<span class="number">1</span>:<span class="number">47</span>, frequency = <span class="number">4</span>, start = <span class="built_in">c</span>(<span class="number">1959</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">ts(matrix(rpois(<span class="number">36</span>, <span class="number">5</span>), <span class="number">12</span>, <span class="number">3</span>), start = <span class="built_in">c</span>(<span class="number">1961</span>,<span class="number">1</span>),frequency = <span class="number">12</span>)</span><br><span class="line">ts(matrix(rpois(<span class="number">36</span>, <span class="number">5</span>)), start = <span class="built_in">c</span>(<span class="number">1961</span>,<span class="number">1</span>),frequency = <span class="number">12</span>)</span><br></pre></td></tr></table></figure><h3 id="常用的统计函数"><a class="markdownIt-Anchor" href="#常用的统计函数"></a> 常用的统计函数</h3><ol><li><code>mad()</code> 中位绝对离差</li></ol><p><code>MAD=median(∣Xi−median(X)∣)</code> 鲁棒性</p><p>具体可参见：<a href="https://blog.csdn.net/horses/article/details/78749485">https://blog.csdn.net/horses/article/details/78749485</a></p><ol start="2"><li>中位数、方差、标准差、范围、四分位数极差、分位数</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- seq(<span class="number">10</span>)</span><br><span class="line">sd(x)</span><br><span class="line">var(x)</span><br><span class="line">sd(x)</span><br><span class="line"><span class="built_in">range</span>(x)</span><br><span class="line">IQR(x)</span><br><span class="line">quantile(x)</span><br></pre></td></tr></table></figure><ol start="3"><li>累乘、累和（结果）</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- seq(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">prod</span>(x)</span><br><span class="line"><span class="built_in">sum</span>(x)</span><br></pre></td></tr></table></figure><ol start="4"><li>累和、累积、累小、累大（每一个）</li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- seq(<span class="number">5</span>)</span><br><span class="line">y &lt;- <span class="built_in">c</span>(<span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">7</span>)</span><br><span class="line"><span class="built_in">cumsum</span>(x)</span><br><span class="line"><span class="built_in">cumprod</span>(x)</span><br><span class="line"><span class="built_in">cummax</span>(y)</span><br><span class="line"><span class="built_in">cummin</span>(y)</span><br></pre></td></tr></table></figure><ol start="5"><li>排序 <code>rev()</code>、<code>sort()</code>、<code>order()</code>、<code>rank()</code></li></ol><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(x &lt;- sample(seq(<span class="number">20</span>),<span class="number">5</span>,replace = <span class="built_in">F</span>))</span><br><span class="line">rev(x)  <span class="comment"># 逆序</span></span><br><span class="line">sort(x)  <span class="comment"># 按从小到大顺序</span></span><br><span class="line">rank(x)  <span class="comment"># 排序后的顺序</span></span><br><span class="line">order(x) <span class="comment"># 排序后所放元素在之前的位置</span></span><br><span class="line"></span><br><span class="line">x[order(x)]</span><br><span class="line">sort(x)[rank(x)]</span><br></pre></td></tr></table></figure><h2 id="一个技巧"><a class="markdownIt-Anchor" href="#一个技巧"></a> 一个技巧</h2><p>这是一个乱入的技巧，记得使用R语言做机器学习的时候用到的。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">substitute</span></span><br><span class="line">deparse(<span class="built_in">substitute</span>(series))</span><br><span class="line">?deparse  <span class="comment">#将表达式转换为字符串</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;这是曾经R语言软件课程的简单笔记的数据结构部份，整理至此。&lt;/p&gt;</summary>
    
    
    
    <category term="R" scheme="https://www.hermitlsr.top/categories/R/"/>
    
    <category term="学习笔记" scheme="https://www.hermitlsr.top/categories/R/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="R" scheme="https://www.hermitlsr.top/tags/R/"/>
    
  </entry>
  
</feed>
