var requests_url="https://hexo-circle-of-friends-api-blue-phi.vercel.app/api",orign_data=[],maxnumber=20,addnumber=20,opentype="_blank",nofollow=!0,loadingCutom='<img src="https://cdn.jsdelivr.net/gh/hermitlsr/image-for-hermitlsr.top/web/lazyload_saber3.gif" alt="加载中...">';if(document.getElementById("moments_container")){var loading_pic=document.getElementById("moments_container");loading_pic.innerHTML=void 0===loadingCutom||null==loadingCutom||""===loadingCutom?'<style>.loader { color: #d9dad8; font-size: 90px; text-indent: -9999em; overflow: hidden; width: 1em; height: 1em; border-radius: 50%; margin: 72px auto; position: relative; -webkit-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load6 1.7s infinite ease, round 1.7s infinite ease; animation: load6 1.7s infinite ease, round 1.7s infinite ease; } @-webkit-keyframes load6 { 0% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 5%, 95% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 10%, 59% { box-shadow: 0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em, -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em, -0.297em -0.775em 0 -0.477em; } 20% { box-shadow: 0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em, -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em, -0.749em -0.34em 0 -0.477em; } 38% { box-shadow: 0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em, -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em, -0.82em -0.09em 0 -0.477em; } 100% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } } @keyframes load6 { 0% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 5%, 95% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } 10%, 59% { box-shadow: 0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em, -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em, -0.297em -0.775em 0 -0.477em; } 20% { box-shadow: 0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em, -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em, -0.749em -0.34em 0 -0.477em; } 38% { box-shadow: 0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em, -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em, -0.82em -0.09em 0 -0.477em; } 100% { box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em; } } @-webkit-keyframes round { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @keyframes round { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }</style><center><span id="moments_loading"><div class="loader"></div></span></center>':'<center><span id="moments_loading">'+loadingCutom+"</span></center>",fetch(requests_url).then((e=>e.json())).then((e=>{data_handle(nofollow,orign_data=e,maxnumber)}))}var data_handle=(e,t,m)=>{for(var n=todaypost(),o=new Date(n),a=0;a<t[1].length;a++)new Date(t[1][a][1])>o&&t[1].splice(a--,1);var i,s=0,r=0,l=t[1].slice(0,m),d=t[1].length,p=t[0].length,f=slice_month(l),g=timezoon(f),c=[];for(var a of t[1])a[1]===n&&(s+=1),c.push(a[3]);var h=unique(c);for(var a of(i=h.length,t[0]))"true"===a[3]&&(r+=1);var _="<h2>统计信息</h2>";for(var b of(_+='<div id="info_user_pool" class="moments-item info_user_pool" style="">',_+='<div class="moments_chart"><span class="moments_post_info_title">当前友链数：</span><span class="moments_post_info_number">'+p+' 个</span><br><span class="moments_post_info_title">失败数：</span><span class="moments_post_info_number">'+r+" 个</span><br></div>",_+='<div class="moments_chart"><span class="moments_post_info_title">活跃友链数：</span><span class="moments_post_info_number">'+i+' 个</span><br><span class="moments_post_info_title">当前库存：</span><span class="moments_post_info_number">'+d+" 篇</span><br></div>",_+='<div class="moments_chart"><span class="moments_post_info_title">今日更新：</span><span class="moments_post_info_number">'+s+' 篇</span><br><span class="moments_post_info_title">最近更新：</span><span class="moments_post_info_number">'+g+"</span><br></div>",_+="</div>",f))for(var u of(_+="<h2>"+b[0]+"</h2>",b[1])){var x;x=e&&"_blank"==opentype?"noopener nofollow":e?"nofollow":"_blank"==opentype?"noopener":"",_+=' <div class="moments-item">',_+=' <a target="'+opentype+'" class="moments-item-img" href="'+u[2]+'" title="'+u[0]+'"rel="'+x+'">',_+='<img onerror="this.onerror=null,this.src=&quot;https://cdn.jsdelivr.net/gh/Zfour/Butterfly-friend-poor-html/friendcircle/404.png&quot;"',_+=' src="'+u[4]+'"></a>',_+='<div class="moments-item-info"><div class="moments-item-time"><i class="far fa-user"></i>',_+="<span>"+u[3]+"</span>",_+=' <div class="moments_post_time"><i class="far fa-calendar-alt"></i><time datetime="'+u[1]+'" title="'+u[1]+'">'+u[1]+"</time></div>",_+=`</div><a target="${opentype}" class="moments-item-title" href="${u[2]}" title="${u[0]}"rel="${x}">${u[0]}</a></div>`,_+="</div>"}t[1].length-m>0&&(_+='<div style="text-align: center"><button type="button" class="moments_load_button" onclick="load_more_post()">加载更多...</button></div>'),_+="<style>.moments-item-info span{padding-left:.3rem;padding-right:.3rem}.moments_post_time time{padding-left:.3rem;cursor:default}.moments_post_info_title{font-weight:700}.moments_post_info_number{float:right}.moments_chart{align-items:flex-start;flex:1;width:100px;height:60px;margin:20px}@media screen and (max-width:500px){.info_user_pool{padding:10px;flex-direction:column;max-height:200px}.moments_chart{flex:0;width:100%;height:160px;margin:0}}.moments-item:before{border:0}@media screen and (min-width:500px){.moments_post_time{float:right}}.moments_load_button{-webkit-transition-duration:.4s;transition-duration:.4s;text-align:center;border:1px solid #ededed;border-radius:.3em;display:inline-block;background:transparent;color:#555;padding:.5em 1.25em}.moments_load_button:hover{color:#3090e4;border-color:#3090e4}.moments-item{position:relative;display:-webkit-box;display:-moz-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;-o-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center;margin:0 0 1rem .5rem;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;-ms-transition:all .2s ease-in-out;transition:all .2s ease-in-out;box-shadow:rgba(0,0,0,0.07) 0 2px 2px 0,rgba(0,0,0,0.1) 0 1px 5px 0;border-radius:2px}.moments-item-img{overflow:hidden;width:80px;height:80px}.moments-item-img img{max-width:100%;width:100%;height:100%;object-fit:cover}.moments-item-info{-webkit-box-flex:1;-moz-box-flex:1;-o-box-flex:1;box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;padding:0 .8rem}.moments-item-title{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;font-size:1.1em;-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;-ms-transition:all .3s;transition:all .3s;-webkit-line-clamp:1}</style>";var w=document.getElementById("moments_container");append_div(w,_)},load_more_post=()=>{document.getElementById("moments_container")&&(maxnumber+=addnumber,document.getElementById("moments_container").innerHTML="",data_handle(nofollow,orign_data,maxnumber))},append_div=(e,t)=>{if(document.getElementById("moments_container")&&(loading_pic.innerHTML=""),"string"==typeof t){var m=document.createElement("div");m.innerHTML=t;for(var n=document.createDocumentFragment();m.firstChild;)n.appendChild(m.firstChild);e.appendChild(n)}else e.appendChild(t)},unique=e=>Array.from(new Set(e)),formatDate=e=>{try{var t=new Date(Date.parse(e.replace(/-/g,"/"))),m=60*((new Date).getTimezoneOffset()?(new Date).getTimezoneOffset():8)*1e3,n=t.getTime(),o=new Date(n-m),a=o.getSeconds().toString(),i=o.getMinutes().toString();return 1===a.length&&(a="0"+a),1===i.length&&(i="0"+i),o.getFullYear().toString()+"/"+(o.getMonth()+1).toString()+"/"+o.getDate().toString()+" "+o.getHours().toString()+":"+i+":"+a}catch(e){return""}},timezoon=e=>{var t=e[0][1][0][5];return formatDate(t)},todaypost=()=>{var e=new Date,t=e.getFullYear(),m=(e.getMonth()+1).toString(),n=e.getDate().toString();return 1===m.length&&(m="0"+m),1===n.length&&(n="0"+n),t+"-"+m+"-"+n},slice_month=e=>{var t=[],m=[],n=e;for(var o in n){if(n[o].push(o),10!==n[o][1].lenth){var a=n[o][1].split("-");a[1].length<2&&(a[1]="0"+a[1]),a[2].length<2&&(a[2]="0"+a[2]),n[o][1]=a.join("-")}var i=n[o][1].slice(0,7);-1!==t.indexOf(i)?m[t.length-1][1].push(n[o]):(t.push(i),m.push([i,[n[o]]]))}for(var s of m)s.push(s[1][0][6]);return m};