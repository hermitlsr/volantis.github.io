<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script language="JavaScript">document.οncοntextmenu=function(){return!1},document.onselectstart=function(){return!1};let h=window.innerHeight,w=window.innerWidth;document.oncontextmenu=function(){return!1},window.onkeydown=window.onkeyup=window.onkeypress=function(){return window.event.returnValue=!1,!1},document.onkeydown=function(){if(window.event&&123==window.event.keyCode)return event.keyCode=0,event.returnValue=!1,!1}</script><!DOCTYPE html><html><head><meta charset="UTF-8"><title>俄罗斯方块</title><style type="text/css">body{margin:0;padding:0;background:url(https://cdn.jsdelivr.net/gh/hermitlsr/CDN-for-hermitlsr.top/game/Tetris/img/bg.png) repeat}.wrap{position:absolute;left:50%;top:49px;width:385px;height:547px;margin-left:-193px}.wrap div{position:absolute}.wrap .now{left:0;top:0;width:261px;height:547px;background-color:rgba(255,255,255,.5);box-shadow:0 0 5px 5px rgba(0,0,0,.6)}.wrap .next{right:0;top:0;width:105px;height:105px;background-color:rgba(255,255,255,.5);box-shadow:0 0 5px 5px rgba(0,0,0,.6)}.wrap .level,.wrap .lines,.wrap .pause,.wrap .refresh,.wrap .score{left:280px;top:150px;width:99px;height:40px;line-height:40px;padding-left:6px;color:#f0907a;border:0 none;border-radius:5px;background-color:rgba(0,0,0,.6)}.wrap .down,.wrap .left,.wrap .quickdown,.wrap .right,.wrap .up{left:330px;top:420px;width:40px;height:40px;line-height:40px;color:#fff;border:0 none;border-radius:5px;text-align:center;background-color:rgba(0,0,0,.6);text-align:center;cursor:pointer;z-index:2}.wrap .left{left:280px;top:470px;background-color:rgba(0,0,0,.6)}.wrap .down{left:330px;top:470px;background-color:rgba(0,0,0,.6)}.wrap .right{left:380px;top:470px;background-color:rgba(0,0,0,.6)}.wrap .quickdown{left:280px;top:520px;width:140px;height:30px;background-color:rgba(0,0,0,.6)}.wrap .down:hover,.wrap .left:hover,.wrap .right:hover,.wrap .up:hover{background-color:rgba(0,0,0,.8)}.wrap .lines{top:200px;color:#4daedd}.wrap .level{top:250px;color:#f03}.wrap .pause,.wrap .refresh{top:310px;width:105px;padding-left:0;color:#fff;text-align:center;cursor:pointer;z-index:2}.wrap .pause:hover,.wrap .refresh:hover{background-color:rgba(0,0,0,.8)}.wrap .refresh{top:360px}.wrap .tips{display:none;left:0;top:150px;width:261px;height:80px;line-height:80px;color:#fff;font-size:42px;font-weight:bolder;text-align:center;text-shadow:0 0 5px #0f0;z-index:2}.wrap_prompt{display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:5}.wrap_prompt .prompt{position:absolute;left:50%;top:220px;width:221px;height:137px;margin-left:-172px;border-radius:20px;background-color:rgba(255,255,255,.8);z-index:6}.wrap_prompt .prompt div{width:51px;height:51px;line-height:51px;margin-left:85px;margin-top:20px;color:#fff;font-size:30px;text-align:center;border:2px solid #fff;border-radius:100%}.wrap_prompt .prompt .failed,.wrap_prompt .prompt .restart{display:block;color:red;line-height:40px;text-align:center}.wrap_prompt .prompt .restart{width:121px;margin-left:50px;color:#646464;background:#ff0;border-radius:50px;cursor:pointer}#box{position:relative;width:385px;height:547px;margin:50px auto}#box div{position:absolute;width:25px;height:25px;transform:rotate(0);transition:.25s}#box .clDiv{transition:1s!important;transform:rotate(0) translateX(0) translateY(0);width:12.5px!important;height:12.5px!important;border:none!important}</style></head><body><div class="wrap"><div class="tips">Good!</div><div class="now"></div><div class="next"></div><div class="score">SCORE: <span>0</span></div><div class="lines">LINES: <span>0</span></div><div class="level">LEVEL: <span>0</span></div><div class="pause">开始</div><div class="refresh">重新开始</div><div class="up"><button type="button" onclick="tetris.moveRotate()" style="width:40px;height:40px">↑</button></div><div class="right"><button onclick="tetris.moveRight()" style="width:40px;height:40px">→</button></div><div class="down"><button onclick="tetris.moveDown()" style="width:40px;height:40px">↓</button></div><div class="left"><button onclick="tetris.moveLeft()" style="width:40px;height:40px">←</button></div><div class="quickdown"><button onclick="tetris.quickDown()" style="width:140px;height:30px">空格</button></div></div><div class="wrap_prompt"><div class="prompt"><div>×</div> <span class="failed">游戏失败</span> <span class="restart">重新开始</span></div></div><script type="text/javascript">var oWrap=document.body.querySelector(".wrap"),oTips=document.body.querySelector(".wrap .tips"),oScore=document.body.querySelector(".wrap .score span"),oLines=document.body.querySelector(".wrap .lines span"),oLevel=document.body.querySelector(".wrap .level span"),oBtn=document.body.querySelector(".wrap .pause"),oReset=document.body.querySelector(".wrap .refresh"),oPrompt=document.body.querySelector(".wrap_prompt"),oRestart=document.body.querySelector(".wrap_prompt .restart"),cloneDivs=document.getElementsByClassName("clDiv"),tetris={box:null,status:0,quick:!1,line:0,level:0,score:0,step:500,timer:null,board:null,boardDiv:null,nowBlock:null,nextBlock:null,nownum:null,nextnum:null,creatblock:null,nextcreatblock:null,notecolorbox:null,init:function(){this.createBox(),this.creatblock=this.createBlock(),this.nowBlock=this.creatblock.block,this.nownum=this.creatblock.num,this.nextcreatblock=this.createBlock(),this.nextBlock=this.nextcreatblock.block,this.nextnum=this.nextcreatblock.num,this.drawBlock(),this.drawNextBlock()},begin:function(){clearInterval(this.timer),this.timer=setInterval((function(){1==tetris.status&&tetris.moveDown()}),this.step)},pause:function(){if(0==tetris.status)return oBtn.innerHTML="暂停",tetris.status=1,tetris.begin(),!0;oBtn.innerHTML="继续",tetris.status=0,clearInterval(tetris.timer)},reStart:function(){for(var t=0;t<21;t++)for(var o=0;o<10;o++)tetris.board[t][o]=0,tetris.boardDiv[10*t+o].style.background="";tetris.eraseNextBlock(),tetris.creatblock=tetris.createBlock(),tetris.nowBlock=tetris.creatblock.block,tetris.nownum=tetris.creatblock.num,tetris.nextcreatblock=tetris.createBlock(),tetris.nextBlock=tetris.nextcreatblock.block,tetris.nextnum=tetris.nextcreatblock.num,tetris.drawBlock(),tetris.drawNextBlock(),oPrompt.style.display="none",oBtn.innerHTML="暂停",tetris.status=1,tetris.begin()},createBox:function(){var t="";this.box=document.createElement("div"),this.box.id="box",this.board=new Array(21);for(var o=0;o<21;o++){this.board[o]=new Array(10);for(var e=0;e<10;e++)this.board[o][e]=0,t+='<div style="left:'+26*e+"px;top:"+26*o+'px"></div>'}for(o=0;o<4;o++)for(e=0;e<4;e++)t+='<div style="left:'+(280+26*e)+"px;top:"+26*o+'px"></div>';this.box.innerHTML=t,document.body.appendChild(this.box),this.boardDiv=document.querySelectorAll("#box > div")},createBlock:function(){var t=new Array(4),o=Math.floor(7*Math.random());switch(o){case 0:t[0]={x:-2,y:4},t[1]={x:-1,y:4},t[2]={x:-2,y:5},t[3]={x:-1,y:5};break;case 1:t[0]={x:-1,y:3},t[1]={x:-1,y:4},t[2]={x:-1,y:5},t[3]={x:-1,y:6};break;case 2:t[0]={x:-3,y:5},t[1]={x:-2,y:4},t[2]={x:-2,y:5},t[3]={x:-1,y:4};break;case 3:t[0]={x:-3,y:4},t[1]={x:-2,y:4},t[2]={x:-2,y:5},t[3]={x:-1,y:5};break;case 4:t[0]={x:-2,y:4},t[1]={x:-1,y:4},t[2]={x:-1,y:5},t[3]={x:-1,y:6};break;case 5:t[0]={x:-3,y:4},t[1]={x:-2,y:4},t[2]={x:-1,y:4},t[3]={x:-1,y:5};break;case 6:t[0]={x:-2,y:5},t[1]={x:-1,y:4},t[2]={x:-1,y:5},t[3]={x:-1,y:6}}return{block:t,num:o}},drawBlock:function(){for(var t=0;t<4;t++)if(!(this.nowBlock[t].x<0))switch(this.board[this.nowBlock[t].x][this.nowBlock[t].y]=1,this.nownum){case 0:this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="red";break;case 1:this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="orange";break;case 2:this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="yellow";break;case 3:this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="green";break;case 4:this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="lightgreen";break;case 5:this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="blue";break;case 6:this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="purple"}},eraseBlock:function(){for(var t=0;t<4;t++)this.nowBlock[t].x<0||(this.board[this.nowBlock[t].x][this.nowBlock[t].y]=0,this.boardDiv[10*this.nowBlock[t].x+this.nowBlock[t].y].style.background="")},drawNextBlock:function(){for(var t=this.nextBlock,o=10,e=10,r=0;r<4;r++)t[r].x<o&&(o=t[r].x),t[r].y<e&&(e=t[r].y);switch(this.nextnum){case 0:for(r=0;r<4;r++)this.boardDiv[210+4*(t[r].x-o)+t[r].y-e].style.background="red";break;case 1:for(r=0;r<4;r++)this.boardDiv[210+4*(t[r].x-o)+t[r].y-e].style.background="orange";break;case 2:for(r=0;r<4;r++)this.boardDiv[210+4*(t[r].x-o)+t[r].y-e].style.background="yellow";break;case 3:for(r=0;r<4;r++)this.boardDiv[210+4*(t[r].x-o)+t[r].y-e].style.background="green";break;case 4:for(r=0;r<4;r++)this.boardDiv[210+4*(t[r].x-o)+t[r].y-e].style.background="lightgreen";break;case 5:for(r=0;r<4;r++)this.boardDiv[210+4*(t[r].x-o)+t[r].y-e].style.background="blue";break;case 6:for(r=0;r<4;r++)this.boardDiv[210+4*(t[r].x-o)+t[r].y-e].style.background="purple"}},eraseNextBlock:function(){for(var t=0;t<16;t++)this.boardDiv[210+t].style.background=""},notenowBox:function(t){t=t;for(var o=new Array(210),e=0,r=0;r<this.board.length;r++)for(var s=0;s<this.board[r].length;s++)o[e]=0==r?" ":r<=t?this.boardDiv[10*(r-1)+s].style.background:this.boardDiv[10*r+s].style.background,e+=1;return o},drawBox:function(){for(var t=0,o=0;o<this.board.length;o++)for(var e=0;e<this.board[o].length;e++)this.boardDiv[10*o+e].style.background=this.notecolorbox[t],t+=1},eraseBox:function(){for(var t=0;t<210;t++)this.boardDiv[t].style.background=""},moveLeft:function(){if(this.tryLeft()){this.eraseBlock();for(var t=0;t<4;t++)this.nowBlock[t].y=this.nowBlock[t].y-1;this.drawBlock()}},tryLeft:function(){this.eraseBlock();for(var t=0;t<4;t++)if(!(this.nowBlock[t].x<0&&this.nowBlock[t].y>0)&&(this.nowBlock[t].y-1==-1||this.board[this.nowBlock[t].x][this.nowBlock[t].y-1]))return this.drawBlock(),!1;return!0},moveRight:function(){if(this.tryRight()){this.eraseBlock();for(var t=0;t<4;t++)this.nowBlock[t].y=this.nowBlock[t].y+1;this.drawBlock()}},tryRight:function(){this.eraseBlock();for(var t=0;t<4;t++)if(!(this.nowBlock[t].x<0&&this.nowBlock[t].y+1<10)&&(this.nowBlock[t].y+1==10||this.board[this.nowBlock[t].x][this.nowBlock[t].y+1]))return this.drawBlock(),!1;return!0},moveRotate:function(){if(this.tryRotate()){this.eraseBlock();for(var t=Math.round((this.nowBlock[0].x+this.nowBlock[1].x+this.nowBlock[2].x+this.nowBlock[3].x)/4),o=Math.round((this.nowBlock[0].y+this.nowBlock[1].y+this.nowBlock[2].y+this.nowBlock[3].y)/4),e=0;e<4;e++){var r=t-o+this.nowBlock[e].y,s=t+o-this.nowBlock[e].x;this.nowBlock[e].x=r,this.nowBlock[e].y=s}this.drawBlock()}},tryRotate:function(){this.eraseBlock();for(var t=Math.round((this.nowBlock[0].x+this.nowBlock[1].x+this.nowBlock[2].x+this.nowBlock[3].x)/4),o=Math.round((this.nowBlock[0].y+this.nowBlock[1].y+this.nowBlock[2].y+this.nowBlock[3].y)/4),e=0;e<4;e++){var r=t-o+this.nowBlock[e].y,s=t+o-this.nowBlock[e].x;if(r<0||s<0||s>9||this.board[r][s])return this.drawBlock(),!1}return!0},quickDown:function(){if(!tetris.quick)var t=setInterval((function(){if(tetris.tryDown()){tetris.eraseBlock();for(var o=0;o<4;o++)tetris.nowBlock[o].x=tetris.nowBlock[o].x+1;tetris.drawBlock()}else clearInterval(t)}),10)},moveDown:function(){if(this.tryDown()){this.eraseBlock();for(var t=0;t<4;t++)this.nowBlock[t].x=this.nowBlock[t].x+1;this.drawBlock()}else{if(1!=this.status)return;this.tryDelLine(),this.nowBlock=this.nextBlock,this.nownum=this.nextnum,this.nextcreatblock=this.createBlock(),this.nextBlock=this.nextcreatblock.block,this.nextnum=this.nextcreatblock.num,this.eraseBlock(),this.drawBlock(),this.eraseNextBlock(),this.drawNextBlock()}},tryDown:function(){this.eraseBlock();for(var t=0;t<4;t++)if(!(this.nowBlock[t].x<0)&&(this.nowBlock[t].x+1==21||this.board[this.nowBlock[t].x+1][this.nowBlock[t].y])){this.drawBlock();for(var o=0;o<4;o++)if(0==this.nowBlock[o].x)return oPrompt.style.display="block",this.status=2,!1;return!1}return!0},tryDelLine:function(){for(var t=0,o=0,e=0;e<this.board.length;e++){for(var r=0;r<this.board[e].length;r++)this.board[e][r]&&o++;10==o&&(t++,this.bombBlock(e),this.board.splice(e,1),this.addNewLine(),this.notecolorbox=tetris.notenowBox(e),this.eraseBox(),this.drawBox()),o=0}this.tipScore(t)},addNewLine:function(){for(var t=new Array(10),o=0;o<t.length;o++)t[o]=0;this.board.unshift(t)},tipScore:function(t){if(0!=t){var o="",e=1;switch(t){case 1:this.score+=1,o="Good!";break;case 2:this.score+=4,o="Great!";break;case 3:this.score+=6,o="Wonderful!";break;case 4:this.score+=8,o="Perfect!"}this.line+=t,Math.floor(this.line/10)>this.level&&(this.level++,this.step-=50,this.begin()),oScore.innerHTML=this.score,oLines.innerHTML=this.line,oLevel.innerHTML=this.level,oTips.style.display="block",oTips.innerHTML=o;var r=setInterval((function(){e+=.1,oTips.style.opacity=Math.abs(e-3),oTips.style.transform="scale("+e+")",e>=3&&(clearInterval(r),oTips.style.display="none")}),30)}},shakeScreen:function(){this.box.style.transform="translateY(10px)",oWrap.style.transform="translateY(10px)",setTimeout((function(){this.box.style.transform="",oWrap.style.transform=""}),30)},bombBlock:function(t){for(var o=0;o<this.board[t].length;o++){this.boardDiv[10*t+o].style.background="";for(var e=0;e<2;e++)for(var r=0;r<2;r++){var s=document.createElement("div");s.className="clDiv",s.style.top=12.5*e+"px",s.style.left=12.5*r+"px",s.style.background="red",this.boardDiv[10*t+o].appendChild(s),i(s,t,o)}}function i(t,o,e){setTimeout((function(){t.style.transform="rotate("+(720+1440*(Math.random()-.5))+"deg) translateX("+400*(Math.random()-.5)+"px) translateY("+400*(Math.random()-.5)+"px)",t.style.opacity=0,setTimeout((function(){tetris.boardDiv[10*o+e].removeChild(t)}),800)}),16)}},easterEgg:function(){var t=Math.round(10*Math.random()+10),o=Math.floor(10*Math.random());this.boardDiv[10*t+o].style.background="#f0f"},keyControl:function(t){if(1==tetris.status||80==t.keyCode)switch(t.keyCode){case 32:tetris.quickDown();break;case 37:tetris.moveLeft();break;case 38:tetris.moveRotate();break;case 39:tetris.moveRight();break;case 40:tetris.moveDown();break;case 80:tetris.pause()}}};tetris.init(),oBtn.onclick=tetris.pause,oReset.onclick=oRestart.onclick=function(){window.location.reload()},document.onkeydown=tetris.keyControl,document.onkeyup=function(t){32==t.keyCode&&(tetris.quick=!1)}</script></body></html><center><span class="btn large"><a class="button" href="/game/Tetris/" title="重载游戏"><i class="fas fa-sync-alt"></i>重载游戏</a></span><span class="btn large"><a class="button" href="/relax/" title="返回列表"><i class="fas fa-undo"></i> 返回列表</a></span></center>